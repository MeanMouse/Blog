{"title": "EventKit \u65e5\u5386\u4e8b\u4ef6", "date": "2018-12-19 13:39:24", "categories": "iOS", "tags": "EventKit", "keywords": "\u65e5\u5386\u4e8b\u4ef6,EventKit,event,reminders", "description": "", "images": "https://lianghuii.com/postCover/EventKit-\u65e5\u5386\u4e8b\u4ef6.png", "file_name": "EventKit-\u65e5\u5386\u4e8b\u4ef6", "short": " EventKit \u6846\u67b6 \n \u6b64\u6846\u67b6\u53ef\u4ee5\u8bbf\u95ee\u624b\u673a\u7cfb\u7edf\u65e5\u5386\u548c\u63d0\u9192\u4e8b\u9879APP\u7684\u6570\u636e\uff0c\u7528\u6b64\u6846\u67b6\u53ef\u4ee5\u6dfb\u52a0\u65e5\u5386\u4e8b\u4ef6\u548c\u63d0\u9192\u4e8b\u9879\u3002 \n info.plist \u914d\u7f6e \n \u5728 info.plist \u6dfb\u52a0\u8bbf\u95ee\u65e5\u5386\u6743\u9650\u548c\u63d0\u9192\u5b9e\u73b0\u7684key\uff1aPrivacy - Calendars Usage Description\u3001Privacy - Reminders Usage Description\uff0c\u76ee\u524d\u53ea\u4f7f\u7528\u5230\u65e5\u5386\u4e8b\u4ef6\u7684\u64cd\u4f5c\u3002 \n ", "content": "<h4 id=\"eventkit\">EventKit \u6846\u67b6</h4>\n<p>\u6b64\u6846\u67b6\u53ef\u4ee5\u8bbf\u95ee\u624b\u673a\u7cfb\u7edf\u65e5\u5386\u548c\u63d0\u9192\u4e8b\u9879APP\u7684\u6570\u636e\uff0c\u7528\u6b64\u6846\u67b6\u53ef\u4ee5\u6dfb\u52a0\u65e5\u5386\u4e8b\u4ef6\u548c\u63d0\u9192\u4e8b\u9879\u3002</p>\n<h4 id=\"infoplist\">info.plist \u914d\u7f6e</h4>\n<p>\u5728 info.plist \u6dfb\u52a0\u8bbf\u95ee\u65e5\u5386\u6743\u9650\u548c\u63d0\u9192\u5b9e\u73b0\u7684key\uff1aPrivacy - Calendars Usage Description\u3001Privacy - Reminders Usage Description\uff0c\u76ee\u524d\u53ea\u4f7f\u7528\u5230\u65e5\u5386\u4e8b\u4ef6\u7684\u64cd\u4f5c\u3002</p>\n<!-- more -->\n<h4 id=\"ekeventstore\">EKEventStore</h4>\n<p>EKEventStore \u7c7b\u4f3c\u4e00\u4e2a\u6570\u636e\u5e93\uff0c\u7ba1\u7406\u7740\u65e5\u5386\u4e8b\u4ef6\u548c\u63d0\u9192\u4e8b\u9879\uff0c\u6211\u4eec\u901a\u8fc7\u5b83\u6765\u64cd\u4f5c\u65e5\u5386\u4e8b\u4ef6\u548c\u63d0\u9192\u4e8b\u9879\u3002<br />\n\u9996\u5148\u6211\u4eec\u521b\u5efa\u4e00\u4e2a EKEventStore\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"bp\">EKEventStore</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">eventStore</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">[[</span><span class=\"bp\">EKEventStore</span><span class=\"w\"> </span><span class=\"n\">alloc</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">init</span><span class=\"p\">];</span><span class=\"w\"></span>\n</code></pre></div>\n\n<p>\u83b7\u53d6\u6388\u6743\uff0centityType \u662f\u6388\u6743\u5b9e\u4f53\u7c7b\u578b\uff0ccompletion \u662f\u6388\u6743\u72b6\u6001\u56de\u8c03</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"cm\">/*</span>\n<span class=\"cm\">typedef NS_ENUM(NSUInteger, EKEntityType) {</span>\n<span class=\"cm\">EKEntityTypeEvent,  // \u65e5\u5386\u4e8b\u4ef6</span>\n<span class=\"cm\">EKEntityTypeReminder  // \u63d0\u9192\u4e8b\u9879</span>\n<span class=\"cm\">};</span>\n<span class=\"cm\">*/</span><span class=\"w\"></span>\n\n<span class=\"p\">-</span> <span class=\"p\">(</span><span class=\"kt\">void</span><span class=\"p\">)</span><span class=\"nf\">requestAccessToEntityType:</span><span class=\"p\">(</span><span class=\"n\">EKEntityType</span><span class=\"p\">)</span><span class=\"nv\">entityType</span><span class=\"w\"> </span><span class=\"nf\">completion:</span><span class=\"p\">(</span><span class=\"n\">EKEventStoreRequestAccessCompletionHandler</span><span class=\"p\">)</span><span class=\"nv\">completion</span><span class=\"w\"> </span><span class=\"n\">NS_AVAILABLE</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"n\">_9</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">_0</span><span class=\"p\">);</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u83b7\u53d6\u65e5\u5386\u4e8b\u4ef6\u6388\u6743</span>\n<span class=\"p\">[</span><span class=\"n\">eventStore</span><span class=\"w\"> </span><span class=\"n\">requestAccessToEntityType</span><span class=\"o\">:</span><span class=\"n\">EKEntityTypeEvent</span><span class=\"w\"> </span><span class=\"n\">completion</span><span class=\"o\">:^</span><span class=\"p\">(</span><span class=\"kt\">BOOL</span><span class=\"w\"> </span><span class=\"n\">granted</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"bp\">NSError</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">error</span><span class=\"p\">){</span><span class=\"w\"></span>\n<span class=\"c1\">//  granted \u662f\u5426\u6388\u6743</span>\n<span class=\"c1\">//  error \u6388\u6743\u5931\u8d25\u539f\u56e0</span>\n<span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">granted</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"c1\">// \u6388\u6743\u6210\u529f</span>\n<span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"c1\">// \u6388\u6743\u5931\u8d25</span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"p\">}];</span><span class=\"w\"></span>\n</code></pre></div>\n\n<h4 id=\"eksource\">EKSource</h4>\n<p>\u65e5\u5386\u6e90\u4e2d\u62e5\u6709\u591a\u4e2a\u65e5\u5386\u5bf9\u8c61\uff0c\u5c06\u65e5\u5386\u5bf9\u8c61\u8fdb\u884c\u5212\u5206\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">typedef</span><span class=\"w\"> </span><span class=\"n\">NS_ENUM</span><span class=\"p\">(</span><span class=\"n\">NSInteger</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">EKSourceType</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"n\">EKSourceTypeLocal</span><span class=\"p\">,</span><span class=\"w\">  </span><span class=\"c1\">// \u672c\u5730\u65e5\u5386\u6e90</span>\n<span class=\"n\">EKSourceTypeExchange</span><span class=\"p\">,</span><span class=\"w\">  </span><span class=\"c1\">// Exchange\u534f\u8bae\u8fdc\u7a0b\u6e90\uff0c\u7f51\u7edc\u8054\u7f51\u540c\u6b65\u6570\u636e\u3002</span>\n<span class=\"n\">EKSourceTypeCalDAV</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"c1\">// CalDAV\u534f\u8bae\u8fdc\u7a0b\u6e90\uff0c\u7f51\u7edc\u8054\u7f51\u540c\u6b65\u6570\u636e\uff0ciCloud \u4fbf\u662f\u8fd9\u8fd9\u7c7b\u3002</span>\n<span class=\"n\">EKSourceTypeMobileMe</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"c1\">// \u6211\u7684iphone</span>\n<span class=\"n\">EKSourceTypeSubscribed</span><span class=\"p\">,</span><span class=\"w\">  </span><span class=\"c1\">// \u8ba2\u9605</span>\n<span class=\"n\">EKSourceTypeBirthdays</span><span class=\"w\">  </span><span class=\"c1\">// \u751f\u65e5</span>\n<span class=\"p\">};</span><span class=\"w\"></span>\n\n<span class=\"k\">@interface</span> <span class=\"bp\">EKSource</span> : <span class=\"bp\">EKObject</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u6e90\u6807\u8bc6</span>\n<span class=\"k\">@property</span><span class=\"p\">(</span><span class=\"k\">nonatomic</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">readonly</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"bp\">NSString</span><span class=\"w\">        </span><span class=\"o\">*</span><span class=\"n\">sourceIdentifier</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"c1\">// \u6e90\u7c7b\u578b</span>\n<span class=\"k\">@property</span><span class=\"p\">(</span><span class=\"k\">nonatomic</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">readonly</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">EKSourceType</span><span class=\"w\">     </span><span class=\"n\">sourceType</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"c1\">// \u6e90\u6807\u9898</span>\n<span class=\"k\">@property</span><span class=\"p\">(</span><span class=\"k\">nonatomic</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">readonly</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"bp\">NSString</span><span class=\"w\">        </span><span class=\"o\">*</span><span class=\"n\">title</span><span class=\"p\">;</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u65e5\u5386\u6e90\u4e2d\u7684\u65e5\u5386\u5bf9\u8c61\u6570\u7ec4</span>\n<span class=\"k\">@property</span><span class=\"p\">(</span><span class=\"k\">nonatomic</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">readonly</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"bp\">NSSet</span><span class=\"o\">&lt;</span><span class=\"bp\">EKCalendar</span><span class=\"w\"> </span><span class=\"o\">*&gt;</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">calendars</span><span class=\"w\"> </span><span class=\"n\">NS_DEPRECATED</span><span class=\"p\">(</span><span class=\"n\">NA</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">NA</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"n\">_0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">_0</span><span class=\"p\">);</span><span class=\"w\"></span>\n\n\n<span class=\"c1\">// \u6839\u636e\u5b9e\u4f53\u7c7b\u578b\u83b7\u53d6\u6e90\u4e2d\u76f8\u5bf9\u5e94\u7c7b\u578b\u7684\u65e5\u5386\u5bf9\u8c61</span>\n\n<span class=\"p\">-</span> <span class=\"p\">(</span><span class=\"bp\">NSSet</span><span class=\"o\">&lt;</span><span class=\"bp\">EKCalendar</span><span class=\"w\"> </span><span class=\"o\">*&gt;</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nf\">calendarsForEntityType:</span><span class=\"p\">(</span><span class=\"n\">EKEntityType</span><span class=\"p\">)</span><span class=\"nv\">entityType</span><span class=\"w\"> </span><span class=\"n\">NS_AVAILABLE</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"n\">_8</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">_0</span><span class=\"p\">);</span><span class=\"w\"></span>\n\n<span class=\"k\">@end</span><span class=\"w\"></span>\n</code></pre></div>\n\n<p>\u65e5\u5386\u6e90\u4e5f\u662f\u901a\u8fc7 EKEventStore \u8fd9\u4e2a\u7ba1\u7406\u8005\u83b7\u53d6\u7684\uff0c EKEventStore \u6709\u4e2a\u5c5e\u6027</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">// \u6240\u6709\u65e5\u5386\u6e90</span>\n<span class=\"k\">@property</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"k\">nonatomic</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">readonly</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"bp\">NSArray</span><span class=\"o\">&lt;</span><span class=\"bp\">EKSource</span><span class=\"w\"> </span><span class=\"o\">*&gt;</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">sources</span><span class=\"p\">;</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u6839\u636e identifier \u83b7\u53d6\u65e5\u5386\u6e90</span>\n\n<span class=\"p\">-</span> <span class=\"p\">(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">EKSource</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nf\">sourceWithIdentifier:</span><span class=\"p\">(</span><span class=\"bp\">NSString</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">identifier</span><span class=\"p\">;</span><span class=\"w\"></span>\n</code></pre></div>\n\n<p>\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u540d\u79f0\u548c\u7c7b\u578b\u83b7\u53d6\u6211\u4eec\u8981\u7684\u65e5\u5386\u6e90</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"bp\">EKSource</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">source</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">eventStore</span><span class=\"p\">.</span><span class=\"n\">sources</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u83b7\u53d6 iCloud \u6e90</span>\n<span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">source</span><span class=\"p\">.</span><span class=\"n\">sourceType</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"n\">EKSourceTypeCalDAV</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"n\">source</span><span class=\"p\">.</span><span class=\"n\">title</span><span class=\"w\"> </span><span class=\"n\">isEqualToString</span><span class=\"o\">:</span><span class=\"s\">@&quot;iCloud&quot;</span><span class=\"p\">])</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n\n<span class=\"n\">calendarSource</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">source</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n\n<h4 id=\"ekcalendar\">EKCalendar</h4>\n<p>EKCalendar \u65e5\u5386\uff0c\u6dfb\u52a0\u7684\u65e5\u5386\u4e8b\u4ef6\u9700\u8981\u9009\u62e9\u4e00\u4e2a\u65e5\u5386\u5bf9\u8c61\uff0c\u65e5\u5386\u5bf9\u8c61\u53ef\u4ee5\u901a\u8fc7 EKEventStore \u6765\u83b7\u53d6\uff0c\u4e5f\u53ef\u4ee5\u83b7\u53d6\u5bf9\u5e94\u7684\u65e5\u5386\u6e90\u6765\u83b7\u53d6\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">// \u6240\u6709\u7684\u65e5\u5386\u5bf9\u8c61</span>\n<span class=\"k\">@property</span><span class=\"p\">(</span><span class=\"k\">nonatomic</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">readonly</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"bp\">NSArray</span><span class=\"o\">&lt;</span><span class=\"bp\">EKCalendar</span><span class=\"w\"> </span><span class=\"o\">*&gt;</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">calendars</span><span class=\"p\">;</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u901a\u8fc7\u5b9e\u4f53\u7c7b\u578b\u6765\u83b7\u53d6\u76f8\u5bf9\u5e94\u7684\u65e5\u5386\u5bf9\u8c61</span>\n\n<span class=\"p\">-</span> <span class=\"p\">(</span><span class=\"bp\">NSArray</span><span class=\"o\">&lt;</span><span class=\"bp\">EKCalendar</span><span class=\"w\"> </span><span class=\"o\">*&gt;</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nf\">calendarsForEntityType:</span><span class=\"p\">(</span><span class=\"n\">EKEntityType</span><span class=\"p\">)</span><span class=\"nv\">entityType</span><span class=\"p\">;</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u4e00\u822c\u6709\u6307\u5b9a\u7684\u9ed8\u8ba4\u4f7f\u7528\u7684\u65e5\u5386\u5bf9\u8c61\uff0c\u6709\u53ef\u80fd\u6ca1\u6709\uff0c\u9700\u5c0f\u5fc3\u4f7f\u7528</span>\n\n<span class=\"p\">-</span> <span class=\"p\">(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">EKCalendar</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nf\">defaultCalendarForNewReminders</span><span class=\"p\">;</span><span class=\"w\"></span>\n</code></pre></div>\n\n<p>\u5f53\u7136\uff0c\u6709\u7684\u65f6\u5019\u4f60\u60f3\u6dfb\u52a0\u4e00\u4e2a\u7531\u81ea\u5df1\u547d\u540d\u7684\u65e5\u5386\u5bf9\u8c61\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">// \u4e8b\u4ef6\u6570\u636e\u7ba1\u7406\u8005</span>\n<span class=\"bp\">EKEventStore</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">eventStore</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">[[</span><span class=\"bp\">EKEventStore</span><span class=\"w\"> </span><span class=\"n\">alloc</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">init</span><span class=\"p\">];</span><span class=\"w\"></span>\n<span class=\"c1\">// \u83b7\u53d6\u65e5\u5386\u6e90</span>\n<span class=\"bp\">EKSource</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">calendarSource</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"nb\">self</span><span class=\"w\"> </span><span class=\"n\">findSource</span><span class=\"p\">];</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u521b\u5efa\u4e8b\u4ef6\u65e5\u5386</span>\n<span class=\"bp\">EKCalendar</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">calendar</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"bp\">EKCalendar</span><span class=\"w\"> </span><span class=\"n\">calendarForEntityType</span><span class=\"o\">:</span><span class=\"n\">EKEntityTypeEvent</span><span class=\"w\"> </span><span class=\"n\">eventStore</span><span class=\"o\">:</span><span class=\"n\">eventStore</span><span class=\"p\">];</span><span class=\"w\"></span>\n<span class=\"n\">calendar</span><span class=\"p\">.</span><span class=\"n\">title</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">title</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"n\">calendar</span><span class=\"p\">.</span><span class=\"n\">source</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">calendarSource</span><span class=\"p\">;</span><span class=\"w\"></span>\n\n<span class=\"bp\">NSError</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">err</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"p\">[</span><span class=\"nb\">self</span><span class=\"p\">.</span><span class=\"n\">eventStore</span><span class=\"w\"> </span><span class=\"n\">saveCalendar</span><span class=\"o\">:</span><span class=\"n\">calendar</span><span class=\"w\"> </span><span class=\"n\">commit</span><span class=\"o\">:</span><span class=\"nb\">YES</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:&amp;</span><span class=\"n\">err</span><span class=\"p\">];</span><span class=\"w\"></span>\n<span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">err</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n\n<span class=\"n\">NSLog</span><span class=\"p\">(</span><span class=\"s\">@&quot;\u6dfb\u52a0\u4e8b\u4ef6\u65e5\u5386\u5931\u8d25&quot;</span><span class=\"p\">);</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n\n<h4 id=\"ekevent\">EKEvent</h4>\n<p>EKEvent \u662f\u65e5\u5386\u4e8b\u4ef6\uff0c\u663e\u793a\u5728\u4e0b\u62c9\u6846\u7684\u65e5\u7a0b\u4e2d\u3002</p>\n<h5 id=\"_1\">\u6dfb\u52a0\u65e5\u5386\u4e8b\u4ef6</h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">// \u4e8b\u4ef6\u6570\u636e\u7ba1\u7406\u8005</span>\n<span class=\"bp\">EKEventStore</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">eventStore</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">[[</span><span class=\"bp\">EKEventStore</span><span class=\"w\"> </span><span class=\"n\">alloc</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">init</span><span class=\"p\">];</span><span class=\"w\"></span>\n<span class=\"bp\">EKEvent</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">event</span><span class=\"w\">  </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"bp\">EKEvent</span><span class=\"w\"> </span><span class=\"n\">eventWithEventStore</span><span class=\"o\">:</span><span class=\"n\">eventStore</span><span class=\"p\">];</span><span class=\"w\"></span>\n<span class=\"n\">event</span><span class=\"p\">.</span><span class=\"n\">title</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">title</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"c1\">// \u6807\u9898</span>\n<span class=\"n\">event</span><span class=\"p\">.</span><span class=\"n\">location</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">content</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"c1\">// \u5185\u5bb9</span>\n<span class=\"n\">event</span><span class=\"p\">.</span><span class=\"n\">startDate</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">startDate</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"c1\">// \u4e8b\u4ef6\u5f00\u59cb\u65f6\u95f4</span>\n<span class=\"n\">event</span><span class=\"p\">.</span><span class=\"n\">endDate</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">endDate</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"c1\">// \u4e8b\u4ef6\u7ed3\u675f\u4e8b\u4ef6</span>\n<span class=\"n\">event</span><span class=\"p\">.</span><span class=\"n\">allDay</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">allDay</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"c1\">// \u63d0\u793a\u662f\u5426\u4e3a \u5168\u5929\u4e8b\u4ef6</span>\n<span class=\"n\">event</span><span class=\"p\">.</span><span class=\"n\">notes</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">note</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"c1\">// \u5907\u6ce8</span>\n\n<span class=\"c1\">// \u6dfb\u52a0\u63d0\u9192\uff0c-1800: \u5f00\u59cb\u524d\u534a\u5c0f\u65f6\u63d0\u9192\uff0c\u5355\u4f4d\u79d2\uff0c\u53ef\u6dfb\u52a0\u591a\u4e2a</span>\n<span class=\"p\">[</span><span class=\"n\">event</span><span class=\"w\"> </span><span class=\"n\">addAlarm</span><span class=\"o\">:</span><span class=\"p\">[</span><span class=\"bp\">EKAlarm</span><span class=\"w\"> </span><span class=\"n\">alarmWithRelativeOffset</span><span class=\"o\">:</span><span class=\"mi\">-1800</span><span class=\"p\">]];</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u6bcf\u5929\u91cd\u590d</span>\n<span class=\"bp\">EKRecurrenceRule</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">rule</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">[[</span><span class=\"bp\">EKRecurrenceRule</span><span class=\"w\"> </span><span class=\"n\">alloc</span><span class=\"p\">]</span><span class=\"n\">initRecurrenceWithFrequency</span><span class=\"o\">:</span><span class=\"n\">EKRecurrenceFrequencyDaily</span><span class=\"w\"> </span><span class=\"n\">interval</span><span class=\"o\">:</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">end</span><span class=\"o\">:</span><span class=\"p\">[</span><span class=\"bp\">EKRecurrenceEnd</span><span class=\"w\"> </span><span class=\"n\">recurrenceEndWithEndDate</span><span class=\"o\">:</span><span class=\"n\">endDate</span><span class=\"p\">]];</span><span class=\"w\"></span>\n<span class=\"n\">event</span><span class=\"p\">.</span><span class=\"n\">recurrenceRules</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"l\">@[</span><span class=\"n\">rule</span><span class=\"l\">]</span><span class=\"p\">;</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u8bbe\u7f6e\u4e8b\u4ef6\u6240\u5c5e\u7684\u65e5\u5386\u5bf9\u8c61</span>\n<span class=\"p\">[</span><span class=\"n\">event</span><span class=\"w\"> </span><span class=\"n\">setCalendar</span><span class=\"o\">:</span><span class=\"n\">calendar</span><span class=\"p\">];</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u6dfb\u52a0\u65e5\u5386\u4e8b\u4ef6</span>\n<span class=\"bp\">NSError</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">err</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"p\">[</span><span class=\"n\">eventStore</span><span class=\"w\"> </span><span class=\"n\">saveEvent</span><span class=\"o\">:</span><span class=\"n\">event</span><span class=\"w\"> </span><span class=\"n\">span</span><span class=\"o\">:</span><span class=\"n\">EKSpanThisEvent</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:&amp;</span><span class=\"n\">err</span><span class=\"p\">];</span><span class=\"w\"></span>\n<span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">err</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"n\">NSLog</span><span class=\"p\">(</span><span class=\"s\">@&quot;\u6dfb\u52a0\u5931\u8d25&quot;</span><span class=\"p\">);</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"n\">NSLog</span><span class=\"p\">(</span><span class=\"s\">@&quot;\u5df2\u6dfb\u52a0\u5230\u7cfb\u7edf\u65e5\u5386\u4e2d&quot;</span><span class=\"p\">);</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u6dfb\u52a0\u65e5\u5386\u4e8b\u4ef6</span>\n\n<span class=\"o\">-</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kt\">BOOL</span><span class=\"p\">)</span><span class=\"n\">saveEvent</span><span class=\"o\">:</span><span class=\"p\">(</span><span class=\"bp\">EKEvent</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">event</span><span class=\"w\"> </span><span class=\"n\">span</span><span class=\"o\">:</span><span class=\"p\">(</span><span class=\"n\">EKSpan</span><span class=\"p\">)</span><span class=\"n\">span</span><span class=\"w\"> </span><span class=\"n\">commit</span><span class=\"o\">:</span><span class=\"p\">(</span><span class=\"kt\">BOOL</span><span class=\"p\">)</span><span class=\"n\">commit</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"p\">(</span><span class=\"bp\">NSError</span><span class=\"w\"> </span><span class=\"o\">**</span><span class=\"p\">)</span><span class=\"n\">error</span><span class=\"p\">;</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u6dfb\u52a0\u63d0\u9192\u4e8b\u9879</span>\n<span class=\"c1\">// commit \u4e3aYES\u65f6\uff0c\u9a6c\u4e0a\u63d0\u4ea4\u66f4\u6539\uff0c\u4e00\u6b21\u5904\u7406\u4e00\u4e2a\u4e8b\u4ef6\u3002\u4e3a NO \u65f6\uff0c\u4e0d\u4f1a\u9a6c\u4e0a\u63d0\u4ea4\u6539\u52a8\uff0c\u53ef\u4ee5\u8fde\u7eed\u63d0\u4ea4\u591a\u4e2a\uff0c\u5728\u8c03\u7528 - (BOOL)commit:(NSError **)error \u65b9\u6cd5\u540e\u63d0\u4ea4\u6240\u6709\u6539\u52a8\u3002</span>\n\n<span class=\"p\">-</span> <span class=\"p\">(</span><span class=\"kt\">BOOL</span><span class=\"p\">)</span><span class=\"nf\">saveReminder:</span><span class=\"p\">(</span><span class=\"bp\">EKReminder</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">reminder</span><span class=\"w\"> </span><span class=\"nf\">commit:</span><span class=\"p\">(</span><span class=\"kt\">BOOL</span><span class=\"p\">)</span><span class=\"nv\">commit</span><span class=\"w\"> </span><span class=\"nf\">error:</span><span class=\"p\">(</span><span class=\"bp\">NSError</span><span class=\"w\"> </span><span class=\"o\">**</span><span class=\"p\">)</span><span class=\"nv\">error</span><span class=\"p\">;</span><span class=\"w\"></span>\n</code></pre></div>\n\n<h5 id=\"_2\">\u91cd\u590d\u89c4\u5219</h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">// \u6b64\u679a\u4e3e\u7c7b\u578b\u7528\u4e8e\u6307\u793a\u5bf9\u91cd\u590d\u4e8b\u4ef6\u8fdb\u884c\u66f4\u6539\u7684\u8303\u56f4\u3002EKSpanThis\u6307\u793a\u66f4\u6539\u5e94\u4ec5\u5e94\u7528\u4e8e\u6b64\u4e8b\u4ef6\uff0cEKSpanFutureEvents\u6307\u793a\u66f4\u6539\u5e94\u5e94\u7528\u4e8e\u6b64\u4e8b\u4ef6\u4ee5\u53ca\u6a21\u5f0f\u4e2d\u7684\u6240\u6709\u672a\u6765\u4e8b\u4ef6\u3002</span>\n<span class=\"k\">typedef</span><span class=\"w\"> </span><span class=\"n\">NS_ENUM</span><span class=\"p\">(</span><span class=\"n\">NSInteger</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">EKSpan</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"n\">EKSpanThisEvent</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"n\">EKSpanFutureEvents</span><span class=\"w\"></span>\n<span class=\"p\">};</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u91cd\u590d\u9891\u7387\u7c7b\u578b</span>\n<span class=\"k\">typedef</span><span class=\"w\"> </span><span class=\"n\">NS_ENUM</span><span class=\"p\">(</span><span class=\"n\">NSInteger</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">EKRecurrenceFrequency</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"n\">EKRecurrenceFrequencyDaily</span><span class=\"p\">,</span><span class=\"w\"> </span>\n<span class=\"n\">EKRecurrenceFrequencyWeekly</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"n\">EKRecurrenceFrequencyMonthly</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"n\">EKRecurrenceFrequencyYearly</span><span class=\"w\"></span>\n<span class=\"p\">};</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u5b8c\u6574\u521d\u59cb\u5316\u65b9\u6cd5</span>\n\n<span class=\"p\">-</span> <span class=\"p\">(</span><span class=\"kt\">instancetype</span><span class=\"p\">)</span><span class=\"nf\">initRecurrenceWithFrequency:</span><span class=\"p\">(</span><span class=\"n\">EKRecurrenceFrequency</span><span class=\"p\">)</span><span class=\"nv\">type</span><span class=\"w\"></span>\n<span class=\"nl\">interval</span><span class=\"p\">:(</span><span class=\"n\">NSInteger</span><span class=\"p\">)</span><span class=\"nv\">interval</span><span class=\"w\"> </span>\n<span class=\"nl\">daysOfTheWeek</span><span class=\"p\">:(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">NSArray</span><span class=\"o\">&lt;</span><span class=\"bp\">EKRecurrenceDayOfWeek</span><span class=\"w\"> </span><span class=\"o\">*&gt;</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">days</span><span class=\"w\"></span>\n<span class=\"nl\">daysOfTheMonth</span><span class=\"p\">:(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">NSArray</span><span class=\"o\">&lt;</span><span class=\"bp\">NSNumber</span><span class=\"w\"> </span><span class=\"o\">*&gt;</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">monthDays</span><span class=\"w\"></span>\n<span class=\"nl\">monthsOfTheYear</span><span class=\"p\">:(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">NSArray</span><span class=\"o\">&lt;</span><span class=\"bp\">NSNumber</span><span class=\"w\"> </span><span class=\"o\">*&gt;</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">months</span><span class=\"w\"></span>\n<span class=\"nl\">weeksOfTheYear</span><span class=\"p\">:(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">NSArray</span><span class=\"o\">&lt;</span><span class=\"bp\">NSNumber</span><span class=\"w\"> </span><span class=\"o\">*&gt;</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">weeksOfTheYear</span><span class=\"w\"></span>\n<span class=\"nl\">daysOfTheYear</span><span class=\"p\">:(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">NSArray</span><span class=\"o\">&lt;</span><span class=\"bp\">NSNumber</span><span class=\"w\"> </span><span class=\"o\">*&gt;</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">daysOfTheYear</span><span class=\"w\"></span>\n<span class=\"nl\">setPositions</span><span class=\"p\">:(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">NSArray</span><span class=\"o\">&lt;</span><span class=\"bp\">NSNumber</span><span class=\"w\"> </span><span class=\"o\">*&gt;</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">setPositions</span><span class=\"w\"></span>\n<span class=\"nl\">end</span><span class=\"p\">:(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">EKRecurrenceEnd</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">end</span><span class=\"p\">;</span><span class=\"w\"></span>\n\n<span class=\"n\">type</span><span class=\"err\">\uff1a</span><span class=\"n\">\u91cd\u590d\u9891\u7387\u7c7b\u578b</span><span class=\"w\"></span>\n<span class=\"n\">interval</span><span class=\"err\">\uff1a</span><span class=\"n\">\u95f4\u9694\u591a\u5c11\u5929</span><span class=\"o\">/</span><span class=\"n\">\u5468</span><span class=\"o\">/</span><span class=\"n\">\u6708</span><span class=\"o\">/</span><span class=\"n\">\u5e74</span><span class=\"err\">\uff0c</span><span class=\"n\">\u5fc5\u987b\u5927\u4e8e0</span><span class=\"err\">\uff0c</span><span class=\"n\">\u4e3a1\u65f6</span><span class=\"err\">\uff0c</span><span class=\"n\">\u8868\u793a\u6bcf\u5929</span><span class=\"o\">/</span><span class=\"n\">\u5468</span><span class=\"o\">/</span><span class=\"n\">\u6708</span><span class=\"o\">/</span><span class=\"n\">\u5e74</span><span class=\"w\"></span>\n<span class=\"n\">daysOfTheWeek</span><span class=\"err\">\uff1a</span><span class=\"n\">EKRecurrenceFrequencyWeekly\u7c7b\u578b\u6709\u6548</span><span class=\"err\">\uff0c</span><span class=\"n\">\u4e00\u5468\u4e2d\u7684\u54ea\u51e0\u5929\u89e6\u53d1</span><span class=\"w\"></span>\n<span class=\"n\">daysOfTheMonth</span><span class=\"err\">\uff1a</span><span class=\"n\">EKRecurrenceFrequencyMonthly\u7c7b\u578b\u6709\u6548</span><span class=\"err\">\uff0c</span><span class=\"n\">\u4e00\u4e2a\u6708\u4e2d\u7684\u54ea\u51e0\u53f7\u89e6\u53d1</span><span class=\"err\">\uff0c</span><span class=\"n\">\u53d6\u503c\u8303\u56f4</span><span class=\"err\">\uff1a</span><span class=\"mi\">-31</span><span class=\"err\">\uff5e</span><span class=\"mi\">31</span><span class=\"err\">\uff0c</span><span class=\"n\">\u5fc5\u987b\u5927\u4e8e0</span><span class=\"err\">\uff0c</span><span class=\"mi\">-1</span><span class=\"n\">\u8868\u793a\u4e00\u4e2a\u6708\u7684\u6700\u540e\u4e00\u5929</span><span class=\"w\"></span>\n<span class=\"n\">monthsOfTheYear</span><span class=\"err\">\uff1a</span><span class=\"n\">EKRecurrenceFrequencyYearly\u7c7b\u578b\u6709\u6548</span><span class=\"err\">\uff0c</span><span class=\"n\">\u4e00\u5e74\u4e2d\u54ea\u51e0\u4e2a\u6708\u89e6\u53d1</span><span class=\"err\">\uff0c</span><span class=\"n\">\u53d6\u503c\u8303\u56f4</span><span class=\"err\">\uff1a</span><span class=\"mi\">1</span><span class=\"err\">\uff5e</span><span class=\"mi\">12</span><span class=\"err\">\uff0c</span><span class=\"mi\">-1</span><span class=\"n\">\u8868\u793a\u4e00\u5e74\u7684\u6700\u540e\u4e00\u6708</span><span class=\"w\"></span>\n<span class=\"n\">weeksOfTheYear</span><span class=\"err\">\uff1a</span><span class=\"n\">EKRecurrenceFrequencyYearly\u7c7b\u578b\u6709\u6548</span><span class=\"err\">\uff0c</span><span class=\"n\">\u4e00\u5e74\u4e2d\u7684\u54ea\u51e0\u5468\u89e6\u53d1</span><span class=\"err\">\uff0c</span><span class=\"n\">\u53d6\u503c\u8303\u56f4</span><span class=\"err\">\uff1a</span><span class=\"mi\">-53</span><span class=\"err\">\uff5e</span><span class=\"mi\">53</span><span class=\"err\">\uff0c</span><span class=\"mi\">-1</span><span class=\"n\">\u8868\u793a\u4e00\u5e74\u7684\u6700\u540e\u4e00\u5468</span><span class=\"w\"></span>\n<span class=\"n\">daysOfTheYear</span><span class=\"err\">\uff1a</span><span class=\"n\">EKRecurrenceFrequencyYearly\u7c7b\u578b\u6709\u6548</span><span class=\"err\">\uff0c</span><span class=\"n\">\u4e00\u5e74\u4e2d\u7684\u54ea\u51e0\u5929\u89e6\u53d1</span><span class=\"err\">\uff0c</span><span class=\"n\">\u53d6\u503c\u8303\u56f4</span><span class=\"err\">\uff1a</span><span class=\"mi\">-366</span><span class=\"err\">\uff5e</span><span class=\"mi\">366</span><span class=\"err\">\uff0c</span><span class=\"mi\">-1</span><span class=\"n\">\u8868\u793a\u4e00\u5e74\u7684\u6700\u540e\u4e00\u5929</span><span class=\"w\"></span>\n<span class=\"n\">setPositions</span><span class=\"err\">\uff1a</span><span class=\"n\">\u6b64\u5c5e\u6027\u5bf9\u4e8e\u5177\u6709\u6709\u6548\u7684daysOfTheWeek</span><span class=\"err\">\u3001</span><span class=\"n\">daysOfTheMonth</span><span class=\"err\">\u3001</span><span class=\"n\">weeksOfTheYear\u6216monthsOfTheYear\u5c5e\u6027\u7684\u89c4\u5219\u6709\u6548</span><span class=\"err\">\uff0c</span><span class=\"n\">\u5b83\u5141\u8bb8\u60a8\u6307\u5b9a\u4e00\u7ec4\u5e8f\u53f7</span><span class=\"err\">\uff0c</span><span class=\"n\">\u4ee5\u5e2e\u52a9\u60a8\u4ece\u6240\u9009\u4e8b\u4ef6\u96c6\u4e2d\u9009\u62e9\u54ea\u4e9b\u5bf9\u8c61</span><span class=\"w\"></span>\n<span class=\"n\">\u5305\u62ec</span><span class=\"err\">\u3002</span><span class=\"n\">\u4f8b\u5982</span><span class=\"err\">\uff1a</span><span class=\"n\">\u5c06daysOfTheWeek</span><span class=\"w\"> </span><span class=\"n\">\u8bbe\u7f6e\u4e3a</span><span class=\"w\"> </span><span class=\"n\">Monday</span><span class=\"o\">-</span><span class=\"n\">Friday</span><span class=\"err\">\uff0c</span><span class=\"n\">\u5e76\u5728\u6570\u7ec4\u4e2d\u5305\u542b</span><span class=\"mi\">-1</span><span class=\"n\">\u7684\u503c\u5c06\u6307\u793a\u91cd\u590d\u8303\u56f4</span><span class=\"err\">\uff08</span><span class=\"n\">\u6708</span><span class=\"err\">\u3001</span><span class=\"n\">\u5e74\u7b49</span><span class=\"err\">\uff09</span><span class=\"n\">\u7684\u6700\u540e\u4e00\u4e2a\u5de5\u4f5c\u65e5</span><span class=\"err\">\uff0c</span><span class=\"n\">\u53d6\u503c\u8303\u56f4</span><span class=\"err\">\uff1a</span><span class=\"mi\">-366</span><span class=\"err\">\uff5e</span><span class=\"mi\">366</span><span class=\"err\">\u3002</span><span class=\"w\"></span>\n<span class=\"n\">end</span><span class=\"err\">\uff1a</span><span class=\"n\">\u7ed3\u675f\u89c4\u5219</span><span class=\"w\"></span>\n</code></pre></div>\n\n<h5 id=\"_3\">\u67e5\u8be2\u4e8b\u4ef6</h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">// \u901a\u8fc7\u4e8b\u4ef6\u6807\u8bc6\u83b7\u53d6</span>\n\n<span class=\"p\">-</span> <span class=\"p\">(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">EKEvent</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nf\">eventWithIdentifier:</span><span class=\"p\">(</span><span class=\"bp\">NSString</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">identifier</span><span class=\"p\">;</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u901a\u8fc7 predicate\u7b5b\u9009\u89c4\u5219\u83b7\u53d6</span>\n\n<span class=\"p\">-</span> <span class=\"p\">(</span><span class=\"bp\">NSArray</span><span class=\"o\">&lt;</span><span class=\"bp\">EKEvent</span><span class=\"w\"> </span><span class=\"o\">*&gt;</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nf\">eventsMatchingPredicate:</span><span class=\"p\">(</span><span class=\"bp\">NSPredicate</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">predicate</span><span class=\"p\">;</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u65e5\u5386\u4e8b\u4ef6 predicate \u7b5b\u9009\u89c4\u5219 \u521b\u5efa</span>\n<span class=\"c1\">// \u6839\u636e\u5f00\u59cb\u65f6\u95f4\u548c\u7ed3\u675f\u65f6\u95f4\uff0c\u4ece\u591a\u4e2a\u6216\u4e00\u4e2a\u65e5\u5386\u5bf9\u8c61\u7b5b\u9009\u51fa\u7b26\u5408\u7684\u65e5\u5386\u4e8b\u4ef6</span>\n\n<span class=\"p\">-</span> <span class=\"p\">(</span><span class=\"bp\">NSPredicate</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nf\">predicateForEventsWithStartDate:</span><span class=\"p\">(</span><span class=\"bp\">NSDate</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">startDate</span><span class=\"w\"> </span><span class=\"nf\">endDate:</span><span class=\"p\">(</span><span class=\"bp\">NSDate</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">endDate</span><span class=\"w\"> </span><span class=\"nf\">calendars:</span><span class=\"p\">(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">NSArray</span><span class=\"o\">&lt;</span><span class=\"bp\">EKCalendar</span><span class=\"w\"> </span><span class=\"o\">*&gt;</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">calendars</span><span class=\"p\">;</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u63d0\u9192\u4e8b\u9879 predicate \u7b5b\u9009\u89c4\u5219 \u521b\u5efa</span>\n<span class=\"c1\">// \u7b5b\u9009\u51fa\u591a\u4e2a\u6216\u4e00\u4e2a\u65e5\u5386\u5bf9\u8c61\u4e2d\u7684\u63d0\u9192\u4e8b\u9879</span>\n\n<span class=\"p\">-</span> <span class=\"p\">(</span><span class=\"bp\">NSPredicate</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nf\">predicateForRemindersInCalendars:</span><span class=\"p\">(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">NSArray</span><span class=\"o\">&lt;</span><span class=\"bp\">EKCalendar</span><span class=\"w\"> </span><span class=\"o\">*&gt;</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">calendars</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"c1\">// \u6839\u636e\u5f00\u59cb\u65f6\u95f4\u548c\u7ed3\u675f\u65f6\u95f4\uff0c\u7b5b\u9009\u591a\u4e2a\u6216\u4e00\u4e2a\u65e5\u5386\u5bf9\u8c61\u4e2d\u8fdb\u884c\u7684\u63d0\u9192\u4e8b\u9879</span>\n<span class=\"p\">-</span> <span class=\"p\">(</span><span class=\"bp\">NSPredicate</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nf\">predicateForIncompleteRemindersWithDueDateStarting:</span><span class=\"p\">(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">NSDate</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">startDate</span><span class=\"w\"> </span><span class=\"nf\">ending:</span><span class=\"p\">(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">NSDate</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">endDate</span><span class=\"w\"> </span><span class=\"nf\">calendars:</span><span class=\"p\">(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">NSArray</span><span class=\"o\">&lt;</span><span class=\"bp\">EKCalendar</span><span class=\"w\"> </span><span class=\"o\">*&gt;</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">calendars</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"c1\">// \u6839\u636e\u5f00\u59cb\u65f6\u95f4\u548c\u7ed3\u675f\u65f6\u95f4\uff0c\u7b5b\u9009\u591a\u4e2a\u6216\u4e00\u4e2a\u65e5\u5386\u5bf9\u8c61\u4e2d\u5b8c\u6210\u7684\u63d0\u9192\u4e8b\u9879</span>\n<span class=\"p\">-</span> <span class=\"p\">(</span><span class=\"bp\">NSPredicate</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nf\">predicateForCompletedRemindersWithCompletionDateStarting:</span><span class=\"p\">(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">NSDate</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">startDate</span><span class=\"w\"> </span><span class=\"nf\">ending:</span><span class=\"p\">(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">NSDate</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">endDate</span><span class=\"w\"> </span><span class=\"nf\">calendars:</span><span class=\"p\">(</span><span class=\"n\">nullable</span><span class=\"w\"> </span><span class=\"bp\">NSArray</span><span class=\"o\">&lt;</span><span class=\"bp\">EKCalendar</span><span class=\"w\"> </span><span class=\"o\">*&gt;</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">calendars</span><span class=\"p\">;</span><span class=\"w\"></span>\n</code></pre></div>\n\n<h5 id=\"_4\">\u5220\u9664\u4e8b\u4ef6</h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">[</span><span class=\"n\">eventStore</span><span class=\"w\"> </span><span class=\"n\">removeEvent</span><span class=\"o\">:</span><span class=\"n\">event</span><span class=\"w\"> </span><span class=\"n\">span</span><span class=\"o\">:</span><span class=\"n\">EKSpanFutureEvents</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:&amp;</span><span class=\"n\">removeError</span><span class=\"p\">];</span><span class=\"w\"></span>\n<span class=\"c1\">// \u5220\u9664\u65e5\u5386\u4e8b\u4ef6\u65b9\u6cd5\uff0cspan \u770b\u91cd\u590d\u89c4\u5219\u90a3\u4e00\u8282</span>\n<span class=\"c1\">// commit \u4e3aYES\u65f6\uff0c\u9a6c\u4e0a\u63d0\u4ea4\u66f4\u6539\uff0c\u4e00\u6b21\u5904\u7406\u4e00\u4e2a\u4e8b\u4ef6\u3002\u4e3a NO \u65f6\uff0c\u4e0d\u4f1a\u9a6c\u4e0a\u63d0\u4ea4\u6539\u52a8\uff0c\u53ef\u4ee5\u8fde\u7eed\u63d0\u4ea4\u591a\u4e2a\uff0c\u5728\u8c03\u7528 - (BOOL)commit:(NSError **)error \u65b9\u6cd5\u540e\u63d0\u4ea4\u6240\u6709\u6539\u52a8\u3002</span>\n\n<span class=\"p\">-</span> <span class=\"p\">(</span><span class=\"kt\">BOOL</span><span class=\"p\">)</span><span class=\"nf\">removeEvent:</span><span class=\"p\">(</span><span class=\"bp\">EKEvent</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">event</span><span class=\"w\"> </span><span class=\"nf\">span:</span><span class=\"p\">(</span><span class=\"n\">EKSpan</span><span class=\"p\">)</span><span class=\"nv\">span</span><span class=\"w\"> </span><span class=\"nf\">error:</span><span class=\"p\">(</span><span class=\"bp\">NSError</span><span class=\"w\"> </span><span class=\"o\">**</span><span class=\"p\">)</span><span class=\"nv\">error</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"p\">-</span> <span class=\"p\">(</span><span class=\"kt\">BOOL</span><span class=\"p\">)</span><span class=\"nf\">removeEvent:</span><span class=\"p\">(</span><span class=\"bp\">EKEvent</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">event</span><span class=\"w\"> </span><span class=\"nf\">span:</span><span class=\"p\">(</span><span class=\"n\">EKSpan</span><span class=\"p\">)</span><span class=\"nv\">span</span><span class=\"w\"> </span><span class=\"nf\">commit:</span><span class=\"p\">(</span><span class=\"kt\">BOOL</span><span class=\"p\">)</span><span class=\"nv\">commit</span><span class=\"w\"> </span><span class=\"nf\">error:</span><span class=\"p\">(</span><span class=\"bp\">NSError</span><span class=\"w\"> </span><span class=\"o\">**</span><span class=\"p\">)</span><span class=\"nv\">error</span><span class=\"p\">;</span><span class=\"w\"></span>\n\n<span class=\"c1\">// \u63d0\u9192\u4e8b\u9879</span>\n\n<span class=\"p\">-</span> <span class=\"p\">(</span><span class=\"kt\">BOOL</span><span class=\"p\">)</span><span class=\"nf\">removeReminder:</span><span class=\"p\">(</span><span class=\"bp\">EKReminder</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"nv\">reminder</span><span class=\"w\"> </span><span class=\"nf\">commit:</span><span class=\"p\">(</span><span class=\"kt\">BOOL</span><span class=\"p\">)</span><span class=\"nv\">commit</span><span class=\"w\"> </span><span class=\"nf\">error:</span><span class=\"p\">(</span><span class=\"bp\">NSError</span><span class=\"w\"> </span><span class=\"o\">**</span><span class=\"p\">)</span><span class=\"nv\">error</span><span class=\"p\">;</span><span class=\"w\"></span>\n</code></pre></div>\n\n<h4 id=\"_5\">\u540e\u8a00</h4>\n<p>EventKit \u5e76\u672a\u63d0\u4f9b\u4fee\u6539\u4e8b\u4ef6\u7684\u65b9\u6cd5\uff0c\u6240\u4ee5\u4f60\u9700\u83b7\u53d6\u4fdd\u5b58\u4e8b\u4ef6\uff0c\u5220\u9664 EventStore \u4e2d\u8be5\u4e8b\u4ef6\uff0c\u7136\u540e\u518d\u6b21\u6dfb\u52a0\u3002</p>"}