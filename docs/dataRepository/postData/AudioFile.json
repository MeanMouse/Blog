{"title": "AudioFile", "date": "2024-03-13 19:40:30", "categories": "\u97f3\u89c6\u9891", "tags": "Audio", "keywords": "AudioFile,\u97f3\u9891\u64ad\u653e", "description": "", "images": "", "file_name": "AudioFile", "short": " \u6982\u8ff0 \n AudioFile \u5f52\u5c5e\u4e8e AudioToolBox \u6846\u67b6, \u53ef\u4ee5\u7528\u4e8e\u8bfb\u53d6\u97f3\u9891\u4fe1\u606f\u548c\u5206\u79bb\u97f3\u9891\u5e27, \u4e0e AudioFileStream \u529f\u80fd\u7c7b\u4f3c, \u4f46\u529f\u80fd\u4f1a\u76f8\u5bf9\u5f3a\u5927. \u5b83\u4e0d\u4ec5\u53ef\u4ee5\u8bfb\u53d6\u5e76\u89e3\u6790\u97f3\u9891, \u8fd8\u53ef\u4ee5\u5199\u5165\u97f3\u9891. \u4f46\u662f\u5b83\u5728\u89e3\u6790\u97f3\u9891\u65f6, \u9700\u8981\u97f3\u9891\u6587\u4ef6\u7684\u5b8c\u6574\u6027, \u9002\u5408\u4e8e\u672c\u5730\u97f3\u9891\u6587\u4ef6, \u4e0d\u9002\u5408\u7528\u4e8e\u6d41\u64ad. \n ", "content": "<h3 id=\"_1\">\u6982\u8ff0</h3>\n<p>AudioFile \u5f52\u5c5e\u4e8e AudioToolBox \u6846\u67b6, \u53ef\u4ee5\u7528\u4e8e\u8bfb\u53d6\u97f3\u9891\u4fe1\u606f\u548c\u5206\u79bb\u97f3\u9891\u5e27, \u4e0e AudioFileStream \u529f\u80fd\u7c7b\u4f3c, \u4f46\u529f\u80fd\u4f1a\u76f8\u5bf9\u5f3a\u5927. \u5b83\u4e0d\u4ec5\u53ef\u4ee5\u8bfb\u53d6\u5e76\u89e3\u6790\u97f3\u9891, \u8fd8\u53ef\u4ee5\u5199\u5165\u97f3\u9891. \u4f46\u662f\u5b83\u5728\u89e3\u6790\u97f3\u9891\u65f6, \u9700\u8981\u97f3\u9891\u6587\u4ef6\u7684\u5b8c\u6574\u6027, \u9002\u5408\u4e8e\u672c\u5730\u97f3\u9891\u6587\u4ef6, \u4e0d\u9002\u5408\u7528\u4e8e\u6d41\u64ad.</p>\n<!-- more -->\n<h3 id=\"audiofile\">AudioFile \u521d\u59cb\u5316</h3>\n<h4 id=\"audiofileopenurl\">AudioFileOpenURL</h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">typedef</span><span class=\"w\"> </span><span class=\"n\">CF_ENUM</span><span class=\"p\">(</span><span class=\"kt\">SInt8</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">AudioFilePermissions</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFileReadPermission</span><span class=\"w\">      </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mh\">0x01</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFileWritePermission</span><span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mh\">0x02</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFileReadWritePermission</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mh\">0x03</span>\n<span class=\"p\">};</span>\n\n<span class=\"k\">extern</span><span class=\"w\"> </span><span class=\"n\">OSStatus</span><span class=\"w\"> </span>\n<span class=\"nf\">AudioFileOpenURL</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"w\">  </span><span class=\"n\">CFURLRef</span><span class=\"w\">                            </span><span class=\"n\">inFileRef</span><span class=\"p\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">AudioFilePermissions</span><span class=\"w\">                </span><span class=\"n\">inPermissions</span><span class=\"p\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">AudioFileTypeID</span><span class=\"w\">                     </span><span class=\"n\">inFileTypeHint</span><span class=\"p\">,</span>\n<span class=\"w\">                    </span><span class=\"n\">AudioFileID</span><span class=\"w\"> </span><span class=\"n\">__nullable</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">__nonnull</span><span class=\"w\">  </span><span class=\"n\">outAudioFile</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<ul>\n<li>inFileRef: \u4f20\u5165 <strong>CFURLRef</strong> url, \u53ea\u652f\u6301\u672c\u5730\u6587\u4ef6.</li>\n<li>inPermissions: \u679a\u4e3e <strong>AudioFilePermissions</strong> \u6388\u4e88\u8bfb\u53d6\u6743\u9650.</li>\n<li>inFileTypeHint: <strong>AudioFileTypeID</strong> \u97f3\u9891\u5efa\u8bae\u7c7b\u578b, \u4e0d\u77e5\u9053\u7c7b\u578b\u4f20 0.</li>\n<li>outAudioFile: <strong>AudioFileID</strong> AudioFile \u5b9e\u4f8b ID.</li>\n</ul>\n<h4 id=\"audiofileopenwithcallbacks\">AudioFileOpenWithCallbacks</h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">AudioFileOpenWithCallbacks</span><span class=\"w\"> </span><span class=\"p\">(</span>\n<span class=\"w\">                </span><span class=\"kt\">void</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\">                              </span><span class=\"n\">inClientData</span><span class=\"p\">,</span>\n<span class=\"w\">                </span><span class=\"n\">AudioFile_ReadProc</span><span class=\"w\">                  </span><span class=\"n\">inReadFunc</span><span class=\"p\">,</span>\n<span class=\"w\">                </span><span class=\"n\">AudioFile_WriteProc</span><span class=\"w\"> </span><span class=\"n\">__nullable</span><span class=\"w\">      </span><span class=\"n\">inWriteFunc</span><span class=\"p\">,</span>\n<span class=\"w\">                </span><span class=\"n\">AudioFile_GetSizeProc</span><span class=\"w\">               </span><span class=\"n\">inGetSizeFunc</span><span class=\"p\">,</span>\n<span class=\"w\">                </span><span class=\"n\">AudioFile_SetSizeProc</span><span class=\"w\"> </span><span class=\"n\">__nullable</span><span class=\"w\">    </span><span class=\"n\">inSetSizeFunc</span><span class=\"p\">,</span>\n<span class=\"w\">                </span><span class=\"n\">AudioFileTypeID</span><span class=\"w\">                     </span><span class=\"n\">inFileTypeHint</span><span class=\"p\">,</span>\n<span class=\"w\">                </span><span class=\"n\">AudioFileID</span><span class=\"w\"> </span><span class=\"n\">__nullable</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">__nonnull</span><span class=\"w\">  </span><span class=\"n\">outAudioFile</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<ul>\n<li>inClientData: \u4e0a\u4e0b\u6587\u5bf9\u8c61, \u56de\u8c03\u51fd\u6570\u4e2d\u4f20\u5165.</li>\n<li>inReadFunc: <strong>AudioFile_ReadProc</strong>, \u8bfb\u53d6\u97f3\u9891\u6570\u636e\u65f6\u56de\u8c03, \u9700\u7ed9\u4e88\u6570\u636e\u8fd4\u56de.</li>\n<li>inWriteFunc: <strong>AudioFile_WriteProc</strong> \u5199\u5165\u97f3\u9891\u6570\u636e\u65f6\u56de\u8c03, \u9700\u7ed9\u4e88\u6570\u636e\u8fd4\u56de.</li>\n<li>inGetSizeFunc: <strong>AudioFile_GetSizeProc</strong> \u83b7\u53d6\u97f3\u9891\u6587\u4ef6\u957f\u5ea6\u65f6\u89e6\u53d1, \u9700\u7ed9\u4e88\u8fd4\u56de\u6587\u4ef6\u957f\u5ea6.</li>\n<li>inSetSizeFunc: <strong>AudioFile_SetSizeProc</strong> \u8bbe\u7f6e\u97f3\u9891\u6587\u4ef6\u957f\u5ea6\u65f6\u89e6\u53d1, \u9700\u7ed9\u4e88\u8fd4\u56de\u6587\u4ef6\u957f\u5ea6.</li>\n<li>inFileTypeHint: <strong>AudioFileTypeID</strong> \u97f3\u9891\u5efa\u8bae\u7c7b\u578b, \u4e0d\u77e5\u9053\u7c7b\u578b\u4f20 0.</li>\n<li>outAudioFile: <strong>AudioFileID</strong> AudioFile \u5b9e\u4f8b ID.</li>\n</ul>\n<p><strong>AudioFileOpenWithCallbacks</strong> \u521b\u5efa\u65b9\u5f0f\u9700\u8981\u5148\u51c6\u5907\u597d\u97f3\u9891\u6587\u4ef6\u6570\u636e, \u5728\u56de\u8c03\u51fd\u6570\u4e2d\u8fd4\u56de AudioFile \u6240\u9700\u8981\u7684\u6570\u636e, \u5426\u5219\u4f1a\u521b\u5efa\u5931\u8d25. \u521b\u5efa\u7684\u6240\u9700\u7684\u6570\u636e\u662f\u5305\u542b\u97f3\u9891\u683c\u5f0f\u4fe1\u606f\u7684\u90a3\u90e8\u5206, \u5373 <strong>AudioFileStream</strong> \u8fd4\u56de <strong>kAudioFileStreamProperty_ReadyToProducePackets</strong> \u65f6\u7684\u957f\u5ea6. \u6240\u4ee5\u5982\u679c AudioFile \u8981\u8bfb\u53d6\u7f51\u7edc\u97f3\u9891\u6d41, \u9700 <strong>AudioFileStream</strong> \u914d\u5408\u4f7f\u7528.</p>\n<h5 id=\"audiofile_readproc\">AudioFile_ReadProc</h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">typedef</span><span class=\"w\"> </span><span class=\"n\">OSStatus</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">AudioFile_ReadProc</span><span class=\"p\">)(</span>\n<span class=\"w\">                                </span><span class=\"kt\">void</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\">      </span><span class=\"n\">inClientData</span><span class=\"p\">,</span>\n<span class=\"w\">                                </span><span class=\"n\">SInt64</span><span class=\"w\">      </span><span class=\"n\">inPosition</span><span class=\"p\">,</span><span class=\"w\"> </span>\n<span class=\"w\">                                </span><span class=\"kt\">UInt32</span><span class=\"w\">      </span><span class=\"n\">requestCount</span><span class=\"p\">,</span>\n<span class=\"w\">                                </span><span class=\"kt\">void</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\">      </span><span class=\"n\">buffer</span><span class=\"p\">,</span><span class=\"w\"> </span>\n<span class=\"w\">                                </span><span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\">    </span><span class=\"n\">actualCount</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<ul>\n<li>inClientData: \u4e0a\u4e0b\u6587\u5bf9\u8c61.</li>\n<li>inPosition: AudioFile \u6240\u9700\u6570\u636e\u5728\u6587\u4ef6\u4e2d\u7684\u5f00\u59cb\u5b57\u8282\u4f4d\u7f6e.</li>\n<li>requestCount: AudioFile \u6240\u9700\u6570\u636e\u7684\u5b57\u8282\u957f\u5ea6.</li>\n<li>buffer: \u901a\u8fc7 memcpy \u51fd\u6570, \u7ed9 AudioFile \u8fd4\u56de\u6240\u9700\u7684\u6570\u636e.</li>\n<li>actualCount: \u8fd4\u56de\u7ed9 AudioFile \u6570\u636e\u7684\u771f\u5b9e\u957f\u5ea6, \u548c buffer \u7684\u957f\u5ea6\u5e94\u4e00\u81f4.</li>\n</ul>\n<p>OSStatus \u8fd4\u56de\u503c\u4e00\u822c\u90fd\u4f20 noError, \u5982\u679c\u8fd4\u56de\u5f02\u5e38\u503c, AudioFile \u9700\u8981\u91cd\u65b0\u6253\u5f00\u624d\u80fd\u4f7f\u7528. \u65e0\u5f02\u5e38\u60c5\u51b5, \u6ca1\u6709\u6570\u636e\u53ef\u8fd4\u56de\u65f6, \u4e5f\u5e94\u8fd4\u56de noError, actualCount \u8fd4\u56de 0.</p>\n<p>\u5728\u8bfb\u53d6\u7f51\u7edc\u97f3\u9891\u6d41, \u7f13\u51b2\u6570\u636e\u4e0d\u591f\u7ed9 AudioFile, \u53ea\u7ed9\u4e86\u4e00\u90e8\u5206\u7684\u60c5\u51b5\u4e0b, AudioFile \u4f1a\u8868\u73b0\u5f02\u5e38, \u65e0\u6cd5\u7ee7\u7eed\u6b63\u5e38\u5de5\u4f5c, \u6b64\u65f6\u9700\u8981\u91cd\u65b0\u521b\u5efa\u6253\u5f00.<br />\n<font color='red'>\u6ce8\u610f: AudioFile \u4e0d\u9002\u7528\u4e8e\u7f51\u7edc\u97f3\u9891\u6d41\u64ad\u653e</font></p>\n<h5 id=\"audiofile_getsizeproc\">AudioFile_GetSizeProc</h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">typedef</span><span class=\"w\"> </span><span class=\"n\">SInt64</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">AudioFile_GetSizeProc</span><span class=\"p\">)(</span>\n<span class=\"w\">                                </span><span class=\"kt\">void</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\">      </span><span class=\"n\">inClientData</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<ul>\n<li>inClientData: \u4e0a\u4e0b\u6587\u5bf9\u8c61.</li>\n<li>\u8fd4\u56de SInt64 \u503c, \u97f3\u9891\u6587\u4ef6\u5b57\u8282\u957f\u5ea6.</li>\n</ul>\n<h5 id=\"audiofile_writeproc\">AudioFile_WriteProc</h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">typedef</span><span class=\"w\"> </span><span class=\"n\">OSStatus</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">AudioFile_WriteProc</span><span class=\"p\">)(</span>\n<span class=\"w\">                                </span><span class=\"kt\">void</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\">      </span><span class=\"n\">inClientData</span><span class=\"p\">,</span>\n<span class=\"w\">                                </span><span class=\"n\">SInt64</span><span class=\"w\">      </span><span class=\"n\">inPosition</span><span class=\"p\">,</span><span class=\"w\"> </span>\n<span class=\"w\">                                </span><span class=\"kt\">UInt32</span><span class=\"w\">      </span><span class=\"n\">requestCount</span><span class=\"p\">,</span><span class=\"w\"> </span>\n<span class=\"w\">                                </span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"kt\">void</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">buffer</span><span class=\"p\">,</span><span class=\"w\"> </span>\n<span class=\"w\">                                </span><span class=\"kt\">UInt32</span><span class=\"w\">    </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">actualCount</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<ul>\n<li>inClientData: \u4e0a\u4e0b\u6587\u5bf9\u8c61.</li>\n<li>inPosition: AudioFile \u5199\u5165\u6570\u636e\u5728\u6587\u4ef6\u4e2d\u7684\u5f00\u59cb\u5b57\u8282\u4f4d\u7f6e.</li>\n<li>requestCount: AudioFile \u5199\u5165\u6570\u636e\u7684\u5b57\u8282\u957f\u5ea6.</li>\n<li>buffer: \u901a\u8fc7 memcpy \u51fd\u6570, \u7ed9 AudioFile \u8fd4\u56de\u5199\u5165\u6570\u636e.</li>\n<li>actualCount: \u8fd4\u56de\u7ed9 AudioFile \u5199\u5165\u6570\u636e\u7684\u771f\u5b9e\u957f\u5ea6, \u548c buffer \u7684\u957f\u5ea6\u5e94\u4e00\u81f4.</li>\n</ul>\n<h5 id=\"audiofile_getsizeproc_1\">AudioFile_GetSizeProc</h5>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">typedef</span><span class=\"w\"> </span><span class=\"n\">OSStatus</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">AudioFile_SetSizeProc</span><span class=\"p\">)(</span>\n<span class=\"w\">                                </span><span class=\"kt\">void</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\">      </span><span class=\"n\">inClientData</span><span class=\"p\">,</span>\n<span class=\"w\">                                </span><span class=\"n\">SInt64</span><span class=\"w\">      </span><span class=\"n\">inSize</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<ul>\n<li>inClientData: \u4e0a\u4e0b\u6587\u5bf9\u8c61.</li>\n<li>inSize: \u5199\u5165\u6570\u636e\u5b57\u8282\u957f\u5ea6</li>\n</ul>\n<h3 id=\"audiofile_1\">AudioFile \u8bfb\u53d6\u97f3\u9891\u4fe1\u606f</h3>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">extern</span><span class=\"w\"> </span><span class=\"n\">OSStatus</span>\n<span class=\"nf\">AudioFileGetPropertyInfo</span><span class=\"p\">(</span><span class=\"w\">       </span><span class=\"n\">AudioFileID</span><span class=\"w\">             </span><span class=\"n\">inAudioFile</span><span class=\"p\">,</span>\n<span class=\"w\">                                </span><span class=\"n\">AudioFilePropertyID</span><span class=\"w\">     </span><span class=\"n\">inPropertyID</span><span class=\"p\">,</span>\n<span class=\"w\">                                </span><span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">__nullable</span><span class=\"w\">     </span><span class=\"n\">outDataSize</span><span class=\"p\">,</span>\n<span class=\"w\">                                </span><span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">__nullable</span><span class=\"w\">     </span><span class=\"n\">isWritable</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<ul>\n<li>inAudioFile: \u4f20\u5165 AudioFile ID.</li>\n<li>inPropertyID: \u4f20\u5165\u8981\u8bfb\u53d6\u7684\u5c5e\u6027\u7c7b\u578b.</li>\n<li>outDataSize: \u83b7\u53d6\u5c5e\u6027\u503c\u7684\u6570\u636e\u5927\u5c0f.</li>\n<li>isWritable: \u83b7\u53d6\u5c5e\u6027\u662f\u5426\u652f\u6301\u5199\u5165.</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">extern</span><span class=\"w\"> </span><span class=\"n\">OSStatus</span>\n<span class=\"nf\">AudioFileGetProperty</span><span class=\"p\">(</span><span class=\"w\">   </span><span class=\"n\">AudioFileID</span><span class=\"w\">             </span><span class=\"n\">inAudioFile</span><span class=\"p\">,</span>\n<span class=\"w\">                        </span><span class=\"n\">AudioFilePropertyID</span><span class=\"w\">     </span><span class=\"n\">inPropertyID</span><span class=\"p\">,</span>\n<span class=\"w\">                        </span><span class=\"kt\">UInt32</span><span class=\"w\">                  </span><span class=\"o\">*</span><span class=\"n\">ioDataSize</span><span class=\"p\">,</span>\n<span class=\"w\">                        </span><span class=\"kt\">void</span><span class=\"w\">                    </span><span class=\"o\">*</span><span class=\"n\">outPropertyData</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<ul>\n<li>inAudioFile: \u4f20\u5165 AudioFile ID.</li>\n<li>nPropertyID: \u4f20\u5165\u8981\u8bfb\u53d6\u7684\u5c5e\u6027\u7c7b\u578b.</li>\n</ul>\n<h4 id=\"audiofilepropertyid\">AudioFilePropertyID</h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">CF_ENUM</span><span class=\"p\">(</span><span class=\"n\">AudioFilePropertyID</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyFileFormat</span><span class=\"w\">            </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">ffmt</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyDataFormat</span><span class=\"w\">            </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">dfmt</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyIsOptimized</span><span class=\"w\">           </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">optm</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyMagicCookieData</span><span class=\"w\">       </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">mgic</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyAudioDataByteCount</span><span class=\"w\">    </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">bcnt</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyAudioDataPacketCount</span><span class=\"w\">  </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">pcnt</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyMaximumPacketSize</span><span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">psze</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyDataOffset</span><span class=\"w\">            </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">doff</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyChannelLayout</span><span class=\"w\">         </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">cmap</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyDeferSizeUpdates</span><span class=\"w\">      </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">dszu</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyDataFormatName</span><span class=\"w\">        </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">fnme</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyMarkerList</span><span class=\"w\">            </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">mkls</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyRegionList</span><span class=\"w\">            </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">rgls</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyPacketToFrame</span><span class=\"w\">         </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">pkfr</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyFrameToPacket</span><span class=\"w\">         </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">frpk</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyRestrictsRandomAccess</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">rrap</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyPacketToRollDistance</span><span class=\"w\">  </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">pkrl</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyPreviousIndependentPacket</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"err\">&#39;</span><span class=\"n\">pind</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyNextIndependentPacket</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">nind</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyPacketToDependencyInfo</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\">  </span><span class=\"err\">&#39;</span><span class=\"n\">pkdp</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyPacketToByte</span><span class=\"w\">          </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">pkby</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyByteToPacket</span><span class=\"w\">          </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">bypk</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyChunkIDs</span><span class=\"w\">              </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">chid</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyInfoDictionary</span><span class=\"w\">        </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">info</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyPacketTableInfo</span><span class=\"w\">       </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">pnfo</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyFormatList</span><span class=\"w\">            </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">flst</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyPacketSizeUpperBound</span><span class=\"w\">  </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">pkub</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyPacketRangeByteCountUpperBound</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"err\">&#39;</span><span class=\"n\">prub</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyReserveDuration</span><span class=\"w\">       </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">rsrv</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyEstimatedDuration</span><span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">edur</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyBitRate</span><span class=\"w\">               </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">brat</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyID3Tag</span><span class=\"w\">                </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">id3t</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyID3TagOffset</span><span class=\"w\">          </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">id3o</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertySourceBitDepth</span><span class=\"w\">        </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">sbtd</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyAlbumArtwork</span><span class=\"w\">          </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">aart</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyAudioTrackCount</span><span class=\"w\">       </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">atct</span><span class=\"err\">&#39;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">kAudioFilePropertyUseAudioTrack</span><span class=\"w\">         </span><span class=\"o\">=</span><span class=\"w\">   </span><span class=\"err\">&#39;</span><span class=\"n\">uatk</span><span class=\"err\">&#39;</span>\n<span class=\"p\">};</span>\n</code></pre></div>\n\n<h5 id=\"kaudiofilepropertydataformat\">kAudioFilePropertyDataFormat</h5>\n<p>\u57fa\u7840\u6587\u4ef6\u683c\u5f0f, \u8fd9\u4e2a\u5c5e\u6027\u7528\u4e8e\u83b7\u53d6\u97f3\u9891\u6d41\u7684\u6570\u636e\u683c\u5f0f. \u901a\u8fc7\u67e5\u8be2\u8fd9\u4e2a\u5c5e\u6027, \u4f60\u53ef\u4ee5\u83b7\u5f97\u6709\u5173\u97f3\u9891\u6d41\u7684\u57fa\u672c\u4fe1\u606f, \u5982\u91c7\u6837\u7387\u3001\u58f0\u9053\u6570\u3001\u7f16\u7801\u683c\u5f0f\u7b49.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">sizeof</span><span class=\"p\">(</span><span class=\"bp\">AudioStreamBasicDescription</span><span class=\"p\">);</span>\n<span class=\"bp\">AudioStreamBasicDescription</span><span class=\"w\"> </span><span class=\"n\">baseFormat</span><span class=\"p\">;</span>\n<span class=\"n\">AudioFileGetProperty</span><span class=\"p\">(</span><span class=\"n\">_fileID</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">kAudioFilePropertyDataFormat</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">size</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">baseFormat</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<h5 id=\"kaudiofilepropertyformatlist\">kAudioFilePropertyFormatList</h5>\n<p>\u8fd9\u4e2a\u5c5e\u6027\u7528\u4e8e\u83b7\u53d6\u97f3\u9891\u6d41\u652f\u6301\u7684\u6240\u6709\u683c\u5f0f\u5217\u8868. \u5f53\u4e00\u4e2a\u97f3\u9891\u6d41\u652f\u6301\u591a\u79cd\u683c\u5f0f\u65f6, \u4f60\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u5c5e\u6027\u6765\u83b7\u53d6\u6240\u6709\u652f\u6301\u7684\u683c\u5f0f\u5217\u8868.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"n\">size</span><span class=\"p\">;</span>\n<span class=\"n\">OSStatus</span><span class=\"w\"> </span><span class=\"n\">status</span><span class=\"p\">;</span>\n\n<span class=\"n\">status</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">AudioFileGetPropertyInfo</span><span class=\"p\">(</span><span class=\"n\">_fileID</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">kAudioFilePropertyFormatList</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">size</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">NULL</span><span class=\"p\">);</span>\n<span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">status</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"n\">noErr</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n<span class=\"w\">  </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"nb\">NO</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"n\">numFormats</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"w\"> </span><span class=\"k\">sizeof</span><span class=\"p\">(</span><span class=\"bp\">AudioFormatListItem</span><span class=\"p\">);</span>\n<span class=\"bp\">AudioFormatListItem</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">formatList</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"bp\">AudioFormatListItem</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">malloc</span><span class=\"p\">(</span><span class=\"n\">size</span><span class=\"p\">);</span>\n<span class=\"n\">status</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">AudioFileGetProperty</span><span class=\"p\">(</span><span class=\"n\">_fileID</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">kAudioFilePropertyFormatList</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">size</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">formatList</span><span class=\"p\">);</span>\n<span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">status</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"n\">noErr</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">free</span><span class=\"p\">(</span><span class=\"n\">formatList</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"nb\">NO</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">numFormats</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">fileFormat</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">formatList</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">].</span><span class=\"n\">mASBD</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n<span class=\"k\">else</span>\n<span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">status</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">AudioFormatGetPropertyInfo</span><span class=\"p\">(</span><span class=\"n\">kAudioFormatProperty_DecodeFormatIDs</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">NULL</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">size</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">status</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"n\">noErr</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">      </span><span class=\"n\">free</span><span class=\"p\">(</span><span class=\"n\">formatList</span><span class=\"p\">);</span>\n<span class=\"w\">      </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"nb\">NO</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n\n<span class=\"w\">    </span><span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"n\">numDecoders</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"w\"> </span><span class=\"k\">sizeof</span><span class=\"p\">(</span><span class=\"n\">OSType</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">OSType</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">decoderIDS</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">OSType</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">malloc</span><span class=\"p\">(</span><span class=\"n\">size</span><span class=\"p\">);</span>\n\n<span class=\"w\">    </span><span class=\"n\">status</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">AudioFormatGetProperty</span><span class=\"p\">(</span><span class=\"n\">kAudioFormatProperty_DecodeFormatIDs</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">NULL</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">size</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">decoderIDS</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">status</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"n\">noErr</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">      </span><span class=\"n\">free</span><span class=\"p\">(</span><span class=\"n\">formatList</span><span class=\"p\">);</span>\n<span class=\"w\">      </span><span class=\"n\">free</span><span class=\"p\">(</span><span class=\"n\">decoderIDS</span><span class=\"p\">);</span>\n<span class=\"w\">      </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"nb\">NO</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n\n<span class=\"w\">    </span><span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"n\">numFormats</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"o\">++</span><span class=\"n\">i</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">      </span><span class=\"n\">OSType</span><span class=\"w\"> </span><span class=\"n\">decoderID</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">formatList</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">].</span><span class=\"n\">mASBD</span><span class=\"p\">.</span><span class=\"n\">mFormatID</span><span class=\"p\">;</span>\n\n<span class=\"w\">      </span><span class=\"kt\">BOOL</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">NO</span><span class=\"p\">;</span>\n<span class=\"w\">      </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"n\">numDecoders</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"o\">++</span><span class=\"n\">j</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">decoderID</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"n\">decoderIDS</span><span class=\"p\">[</span><span class=\"n\">j</span><span class=\"p\">])</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">          </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">YES</span><span class=\"p\">;</span>\n<span class=\"w\">          </span><span class=\"k\">break</span><span class=\"p\">;</span>\n<span class=\"w\">        </span><span class=\"p\">}</span>\n<span class=\"w\">      </span><span class=\"p\">}</span>\n\n<span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">found</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"k\">break</span><span class=\"p\">;</span>\n<span class=\"w\">      </span><span class=\"p\">}</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n\n<span class=\"w\">    </span><span class=\"n\">free</span><span class=\"p\">(</span><span class=\"n\">decoderIDS</span><span class=\"p\">);</span>\n\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">numFormats</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"p\">{</span>\n<span class=\"w\">      </span><span class=\"n\">free</span><span class=\"p\">(</span><span class=\"n\">formatList</span><span class=\"p\">);</span>\n<span class=\"w\">      </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"nb\">NO</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n\n<span class=\"w\">    </span><span class=\"n\">fileFormat</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">formatList</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">].</span><span class=\"n\">mASBD</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">free</span><span class=\"p\">(</span><span class=\"n\">formatList</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<h5 id=\"kaudiofilepropertybitrate\">kAudioFilePropertyBitRate</h5>\n<p>\u83b7\u53d6\u97f3\u9891\u6570\u636e\u7684\u7801\u7387, \u4ee5\u6bcf\u79d2\u4f20\u8f93\u7684\u6bd4\u7279\u6570\uff08bps\uff09\u4e3a\u5355\u4f4d.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"n\">bitRate</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span>\n<span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">sizeof</span><span class=\"p\">(</span><span class=\"n\">bitRate</span><span class=\"p\">);</span>\n<span class=\"n\">AudioFileGetProperty</span><span class=\"p\">(</span><span class=\"n\">_fileID</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">kAudioFilePropertyBitRate</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">size</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">bitRate</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<h5 id=\"kaudiofilepropertydataoffset\">kAudioFilePropertyDataOffset</h5>\n<p>\u83b7\u53d6\u97f3\u9891\u5185\u5bb9\u5728\u97f3\u9891\u6d41\u4e2d\u5f00\u59cb\u7684\u4f4d\u7f6e</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">SInt64</span><span class=\"w\"> </span><span class=\"n\">dataOffset</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span>\n<span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">sizeof</span><span class=\"p\">(</span><span class=\"n\">dataOffset</span><span class=\"p\">);</span>\n<span class=\"n\">AudioFileGetProperty</span><span class=\"p\">(</span><span class=\"n\">_fileID</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">kAudioFilePropertyDataOffset</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">size</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">dataOffset</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<h5 id=\"kaudiofilepropertyaudiodatabytecount\">kAudioFilePropertyAudioDataByteCount</h5>\n<p>\u83b7\u53d6\u97f3\u9891\u5185\u5bb9\u6570\u636e\u957f\u5ea6</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">SInt64</span><span class=\"w\"> </span><span class=\"n\">audioDataByteCount</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span>\n<span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">sizeof</span><span class=\"p\">(</span><span class=\"n\">audioDataByteCount</span><span class=\"p\">);</span>\n<span class=\"n\">AudioFileGetProperty</span><span class=\"p\">(</span><span class=\"n\">_fileID</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">kAudioFilePropertyAudioDataByteCount</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">size</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">audioDataByteCount</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<h5 id=\"kaudiofilepropertyestimatedduration\">kAudioFilePropertyEstimatedDuration</h5>\n<p>\u83b7\u53d6\u97f3\u9891\u9884\u4f30\u65f6\u957f, \u4e0d\u4e00\u5b9a\u51c6\u786e.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">Float64</span><span class=\"w\"> </span><span class=\"n\">estimatedDuration</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.0</span><span class=\"p\">;</span>\n<span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">sizeof</span><span class=\"p\">(</span><span class=\"n\">estimatedDuration</span><span class=\"p\">);</span>\n<span class=\"n\">AudioFileGetProperty</span><span class=\"p\">(</span><span class=\"n\">_fileID</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">kAudioFilePropertyEstimatedDuration</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">size</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">estimatedDuration</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<h5 id=\"kaudiofilepropertymaximumpacketsize\">kAudioFilePropertyMaximumPacketSize</h5>\n<p>\u83b7\u53d6\u97f3\u9891\u6587\u4ef6\u7684\u6700\u5927\u5305\u5927\u5c0f</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"n\">realityMaxPacketSize</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.0</span><span class=\"p\">;</span>\n<span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">sizeof</span><span class=\"p\">(</span><span class=\"n\">realityMaxPacketSize</span><span class=\"p\">);</span>\n<span class=\"n\">AudioFileGetProperty</span><span class=\"p\">(</span><span class=\"n\">_fileID</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">kAudioFilePropertyMaximumPacketSize</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">size</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">realityMaxPacketSize</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<h5 id=\"kaudiofilepropertypacketsizeupperbound\">kAudioFilePropertyPacketSizeUpperBound</h5>\n<p>\u83b7\u53d6\u97f3\u9891\u6587\u4ef6\u7684\u6700\u5927\u5305\u5927\u5c0f\u4e0a\u9650</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"n\">maxPacketSize</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.0</span><span class=\"p\">;</span>\n<span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">sizeof</span><span class=\"p\">(</span><span class=\"n\">maxPacketSize</span><span class=\"p\">);</span>\n<span class=\"n\">AudioFileGetProperty</span><span class=\"p\">(</span><span class=\"n\">_fileID</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">kAudioFilePropertyPacketSizeUpperBound</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">size</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">maxPacketSize</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<h5 id=\"kaudiofilepropertyaudiodatapacketcount\">kAudioFilePropertyAudioDataPacketCount</h5>\n<p>\u83b7\u53d6\u97f3\u9891\u5e27(packet)\u603b\u6570, \u6b64\u4fe1\u606f\u5b58\u5728\u8bef\u5dee\u6216\u4e0d\u51c6\u786e.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">SInt64</span><span class=\"w\"> </span><span class=\"n\">packetCount</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.0</span><span class=\"p\">;</span>\n<span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">sizeof</span><span class=\"p\">(</span><span class=\"n\">packetCount</span><span class=\"p\">);</span>\n<span class=\"n\">AudioFileGetProperty</span><span class=\"p\">(</span><span class=\"n\">_fileID</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">kAudioFilePropertyAudioDataPacketCount</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">size</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">packetCount</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<h5 id=\"kaudiofilepropertymagiccookiedata\">kAudioFilePropertyMagicCookieData</h5>\n<p>Magic Cookie \u4e00\u79cd\u7528\u4e8e\u63cf\u8ff0\u7279\u5b9a\u97f3\u9891\u683c\u5f0f\u6216\u7f16\u89e3\u7801\u5668\u914d\u7f6e\u4fe1\u606f\u7684\u6570\u636e\u5757, \u89e3\u7801\u5668\u9700\u8981\u8be5\u4fe1\u606f.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"n\">cookieSize</span><span class=\"p\">;</span>\n<span class=\"n\">OSStatus</span><span class=\"w\"> </span><span class=\"n\">status</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">AudioFileGetPropertyInfo</span><span class=\"p\">(</span><span class=\"n\">_fileID</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">kAudioFilePropertyMagicCookieData</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">cookieSize</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">NULL</span><span class=\"p\">);</span>\n<span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">status</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"n\">noErr</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"nb\">nil</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"kt\">void</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">cookieData</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">malloc</span><span class=\"p\">(</span><span class=\"n\">cookieSize</span><span class=\"p\">);</span>\n<span class=\"n\">status</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">AudioFileGetProperty</span><span class=\"p\">(</span><span class=\"n\">_fileID</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">kAudioFilePropertyMagicCookieData</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">cookieSize</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">cookieData</span><span class=\"p\">);</span>\n<span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">status</span><span class=\"w\"> </span><span class=\"o\">!=</span><span class=\"w\"> </span><span class=\"n\">noErr</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"nb\">nil</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"bp\">NSData</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">cookie</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"bp\">NSData</span><span class=\"w\"> </span><span class=\"n\">dataWithBytes</span><span class=\"o\">:</span><span class=\"n\">cookieData</span><span class=\"w\"> </span><span class=\"n\">length</span><span class=\"o\">:</span><span class=\"n\">cookieSize</span><span class=\"p\">];</span>\n<span class=\"n\">free</span><span class=\"p\">(</span><span class=\"n\">cookieData</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<h3 id=\"_2\">\u8bfb\u53d6\u97f3\u9891\u6570\u636e</h3>\n<h4 id=\"audiofilereadbytes\">AudioFileReadBytes</h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">extern</span><span class=\"w\"> </span><span class=\"n\">OSStatus</span><span class=\"w\"> </span>\n<span class=\"n\">AudioFileReadBytes</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"w\">    </span><span class=\"n\">AudioFileID</span><span class=\"w\">     </span><span class=\"n\">inAudioFile</span><span class=\"p\">,</span>\n<span class=\"w\">                        </span><span class=\"kt\">Boolean</span><span class=\"w\">         </span><span class=\"n\">inUseCache</span><span class=\"p\">,</span>\n<span class=\"w\">                        </span><span class=\"n\">SInt64</span><span class=\"w\">          </span><span class=\"n\">inStartingByte</span><span class=\"p\">,</span><span class=\"w\"> </span>\n<span class=\"w\">                        </span><span class=\"kt\">UInt32</span><span class=\"w\">          </span><span class=\"o\">*</span><span class=\"n\">ioNumBytes</span><span class=\"p\">,</span><span class=\"w\"> </span>\n<span class=\"w\">                        </span><span class=\"kt\">void</span><span class=\"w\">            </span><span class=\"o\">*</span><span class=\"n\">outBuffer</span><span class=\"p\">)</span><span class=\"w\"> </span>\n</code></pre></div>\n\n<ul>\n<li>inAudioFile: AudioFile \u5b9e\u4f8b ID.</li>\n<li>inUseCache: \u662f\u5426\u9700\u8981\u7f13\u5b58, \u4e00\u822c\u4f20 false.</li>\n<li>inStartingByte: \u4ece\u7b2c\u51e0\u4e2a\u5b57\u8282\u5f00\u59cb\u8bfb\u53d6.</li>\n<li>ioNumBytes: \u9700\u8981\u8bfb\u53d6\u591a\u5c11\u5b57\u8282.</li>\n<li>outBuffer: \u8bfb\u53d6\u5230\u7684\u6570\u636e\u5185\u5bb9.</li>\n</ul>\n<p><strong>AudioFileReadBytes</strong> \u4ec5\u8d1f\u8d23\u8bfb\u53d6\u6570\u636e, \u4e0d\u5206\u79bb\u97f3\u9891\u5e27\u548c\u89e3\u7801.</p>\n<h4 id=\"audiofilereadpacketdata\">AudioFileReadPacketData</h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">extern</span><span class=\"w\"> </span><span class=\"n\">OSStatus</span><span class=\"w\"> </span>\n<span class=\"nf\">AudioFileReadPacketData</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"w\">   </span><span class=\"n\">AudioFileID</span><span class=\"w\">                     </span><span class=\"n\">inAudioFile</span><span class=\"p\">,</span><span class=\"w\"> </span>\n<span class=\"w\">                            </span><span class=\"kt\">Boolean</span><span class=\"w\">                         </span><span class=\"n\">inUseCache</span><span class=\"p\">,</span>\n<span class=\"w\">                            </span><span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\">                        </span><span class=\"n\">ioNumBytes</span><span class=\"p\">,</span>\n<span class=\"w\">                            </span><span class=\"bp\">AudioStreamPacketDescription</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">__nullable</span><span class=\"w\"> </span><span class=\"n\">outPacketDescriptions</span><span class=\"p\">,</span>\n<span class=\"w\">                            </span><span class=\"n\">SInt64</span><span class=\"w\">                          </span><span class=\"n\">inStartingPacket</span><span class=\"p\">,</span><span class=\"w\"> </span>\n<span class=\"w\">                            </span><span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\">                        </span><span class=\"n\">ioNumPackets</span><span class=\"p\">,</span>\n<span class=\"w\">                            </span><span class=\"kt\">void</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">__nullable</span><span class=\"w\">               </span><span class=\"n\">outBuffer</span><span class=\"p\">);</span><span class=\"w\"> </span>\n</code></pre></div>\n\n<ul>\n<li>inAudioFile: AudioFile \u5b9e\u4f8b ID.</li>\n<li>inUseCache: \u662f\u5426\u9700\u8981\u7f13\u5b58, \u4e00\u822c\u4f20 false.</li>\n<li>ioNumBytes: \u8f93\u5165\u65f6\u8868\u793a\u9700\u8981\u8bfb\u53d6\u6570\u636e\u7684\u5927\u5c0f, \u8f93\u51fa\u540e, \u8868\u793a\u5b9e\u9645\u8bfb\u53d6\u5927\u5c0f, \u4e0e outBuffer \u957f\u5ea6\u4e00\u81f4.</li>\n<li>outPacketDescriptions: <strong>AudioStreamPacketDescription</strong> \u97f3\u9891\u5e27\u4fe1\u606f.</li>\n<li>inStartingPacket: \u8bfb\u7b2c\u51e0\u4e2a\u97f3\u9891\u5e27.</li>\n<li>ioNumPackets: \u8bfb\u53d6\u5230\u7684\u97f3\u9891\u5e27\u6570\u91cf.</li>\n<li>outBuffer: \u8bfb\u53d6\u5230\u7684\u97f3\u9891\u6570\u636e, \u9700\u8981\u5206\u914d\u5e27\u9884\u4f30\u5927\u5c0f * \u5e27\u6570\u91cf\u5185\u5b58\u7a7a\u95f4, \u5206\u914d\u7684\u7a7a\u95f4\u5927\u5c0f\u5f71\u54cd\u8bfb\u53d6\u97f3\u9891\u5e27\u7684\u6570\u91cf.</li>\n</ul>\n<h4 id=\"audiofilereadpackets\">AudioFileReadPackets</h4>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">/// !\u5e9f\u5f03 API_DEPRECATED(&quot;no longer supported&quot;, macos(10.2, 10.10), ios(2.0, 8.0))</span>\n<span class=\"k\">extern</span><span class=\"w\"> </span><span class=\"n\">OSStatus</span><span class=\"w\"> </span>\n<span class=\"nf\">AudioFileReadPackets</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"w\">  </span><span class=\"n\">AudioFileID</span><span class=\"w\">                     </span><span class=\"n\">inAudioFile</span><span class=\"p\">,</span><span class=\"w\"> </span>\n<span class=\"w\">                        </span><span class=\"kt\">Boolean</span><span class=\"w\">                         </span><span class=\"n\">inUseCache</span><span class=\"p\">,</span>\n<span class=\"w\">                        </span><span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\">                        </span><span class=\"n\">outNumBytes</span><span class=\"p\">,</span>\n<span class=\"w\">                        </span><span class=\"bp\">AudioStreamPacketDescription</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">__nullable</span><span class=\"w\"> </span><span class=\"n\">outPacketDescriptions</span><span class=\"p\">,</span>\n<span class=\"w\">                        </span><span class=\"n\">SInt64</span><span class=\"w\">                          </span><span class=\"n\">inStartingPacket</span><span class=\"p\">,</span><span class=\"w\"> </span>\n<span class=\"w\">                        </span><span class=\"kt\">UInt32</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\">                        </span><span class=\"n\">ioNumPackets</span><span class=\"p\">,</span>\n<span class=\"w\">                        </span><span class=\"kt\">void</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">__nullable</span><span class=\"w\">               </span><span class=\"n\">outBuffer</span><span class=\"p\">);</span>\n</code></pre></div>\n\n<ul>\n<li>inAudioFile: AudioFile \u5b9e\u4f8b ID.</li>\n<li>inUseCache: \u662f\u5426\u9700\u8981\u7f13\u5b58, \u4e00\u822c\u4f20 false.</li>\n<li>outNumBytes: \u5b9e\u9645\u8bfb\u53d6\u7684\u6570\u636e\u957f\u5ea6.</li>\n<li>outPacketDescriptions: <strong>AudioStreamPacketDescription</strong> \u97f3\u9891\u5e27\u4fe1\u606f.</li>\n<li>ioNumPackets: \u8bfb\u53d6\u5230\u7684\u97f3\u9891\u5e27\u6570\u91cf.</li>\n<li>outBuffer: \u8bfb\u53d6\u5230\u7684\u97f3\u9891\u6570\u636e, \u9700\u8981\u5206\u914d\u5e27\u9884\u4f30\u5927\u5c0f * \u6700\u5927\u5e27\u5927\u5c0f/\u4e0a\u754c, \u5206\u914d\u7684\u7a7a\u95f4\u5927\u5c0f\u5f71\u54cd\u8bfb\u53d6\u97f3\u9891\u5e27\u7684\u6570\u91cf.</li>\n</ul>\n<h3 id=\"audiofile-seek\">AudioFile Seek</h3>\n<p>AudioFile \u53ef\u4ee5\u6839\u636e\u4e0b\u6807\u53bb\u8bfb\u53d6\u97f3\u9891\u5e27\u6570\u636e, \u6240\u4ee5\u53ef\u4ee5\u5148\u8ba1\u7b97\u9700\u8981 Seek \u7684\u97f3\u9891\u5e27\u4e0b\u6807, \u5c31\u80fd\u7b80\u5355\u5b9e\u73b0 Seek \u64cd\u4f5c.</p>\n<p>AudioFile \u4e0b\u6807\u8bfb\u53d6\u97f3\u9891\u5e27\u662f\u6309\u987a\u5e8f\u89e3\u6790\u8bfb\u53d6\u7684, \u56e0\u6b64\u5728\u5f97\u5230\u5b8c\u6574\u97f3\u9891\u6587\u4ef6\u6570\u636e\u65f6, Seek \u4f1a\u6bd4\u8f83\u5feb, \u4f46\u5982\u679c\u662f\u7f51\u7edc\u97f3\u9891\u7684\u8bdd, \u5219\u9700\u8981\u7f13\u51b2\u52a0\u8f7d\u5230 Seek \u4f4d\u7f6e\u97f3\u9891\u5e27\u6570\u636e\u65f6, \u624d\u80fd Seek \u6210\u529f, \u56e0\u6b64 AudioFile \u4e0d\u9002\u5408\u4e0e\u7f51\u7edc\u97f3\u9891\u6d41\u64ad.</p>\n<p>\u5982\u679c\u975e\u8981\u7528\u4e8e\u7f51\u7edc\u97f3\u9891\u6d41\u64ad, \u5c31\u9700\u914d\u5408\u4f7f\u7528 <strong>AudioFileStream</strong>. <strong>AudioFileReadBytes</strong> \u8bfb\u53d6\u97f3\u9891\u6570\u636e, <strong>AudioFileStream</strong> \u5206\u79bb\u97f3\u9891\u5e27. \u8fd9\u9700\u8981\u8ba1\u7b97\u5f97\u5230\u97f3\u9891\u5e27\u5bf9\u5e94\u7684\u5b57\u8282\u4f4d\u7f6e, CBR \u7f16\u7801\u548c VBR \u7f16\u7801\u8ba1\u7b97\u65b9\u5f0f\u4e0d\u540c.</p>\n<h3 id=\"audiofile_2\">\u5173\u95edAudioFile</h3>\n<p>\u5173\u95edAudioFile \u4f7f\u7528\u5b8c\u6bd5\u540e\u9700\u8981\u8c03\u7528 AudioFileClose \u8fdb\u884c\u5173\u95ed.</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">extern</span><span class=\"w\"> </span><span class=\"n\">OSStatus</span><span class=\"w\"> </span><span class=\"n\">AudioFileClose</span><span class=\"w\">  </span><span class=\"p\">(</span><span class=\"n\">AudioFileID</span><span class=\"w\">        </span><span class=\"n\">inAudioFile</span><span class=\"p\">)</span>\n</code></pre></div>"}