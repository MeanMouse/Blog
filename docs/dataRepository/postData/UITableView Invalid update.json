{"title": "UITableView-Invalid-update", "date": "2022-02-10 17:32:11", "categories": "iOS", "tags": "UITableView Error", "keywords": "UITableView,Invalid,update", "description": "", "images": "", "file_name": "UITableView Invalid update", "short": "  \u63a7\u5236\u53f0\u9519\u8bef\u65e5\u5fd7\uff1a\nInvalid update: invalid number of rows in section 0. The number of\nrows contained in an existing section after the update (3) must be\nequal to the number of rows contained in that section before the\nupdate (2), plus or minus the number of rows inserted or deleted from\nthat section (0 inserted, 0 deleted) and plus or minus the number of\nrows moved into or out of that section (0 moved in, 0 moved out).\n\n\u65e0\u6548\u66f4\u65b0\uff1a\u82820\u4e2d\u7684\u884c\u6570\u65e0\u6548\u3002\u884c\u6570\n\u66f4\u65b0\uff083\uff09\u540e\u73b0\u6709\u8282\u4e2d\u5305\u542b\u7684\u884c\u5fc5\u987b\u662f\n\u7b49\u4e8e\u8be5\u8282\u4e2d\u5305\u542b\u7684\u884c\u6570\uff0c\u5728\n\u66f4\u65b0\uff082\uff09\uff0c\u52a0\u4e0a\u6216\u51cf\u53bb\u4ece\u4e2d\u63d2\u5165\u6216\u5220\u9664\u7684\u884c\u6570\n\u8be5\u90e8\u5206\uff08\u63d2\u51650\uff0c\u5220\u96640\uff09\u52a0\u4e0a\u6216\u51cf\u53bb\n\u79fb\u5165\u6216\u79fb\u51fa\u8be5\u8282\u7684\u884c\uff080\u79fb\u5165\uff0c0\u79fb\u51fa\uff09\u3002\n  \n\n ", "content": "<pre class=\"codehilite\"><code class=\"language-swift\">\u63a7\u5236\u53f0\u9519\u8bef\u65e5\u5fd7\uff1a\nInvalid update: invalid number of rows in section 0. The number of\nrows contained in an existing section after the update (3) must be\nequal to the number of rows contained in that section before the\nupdate (2), plus or minus the number of rows inserted or deleted from\nthat section (0 inserted, 0 deleted) and plus or minus the number of\nrows moved into or out of that section (0 moved in, 0 moved out).\n\n\u65e0\u6548\u66f4\u65b0\uff1a\u82820\u4e2d\u7684\u884c\u6570\u65e0\u6548\u3002\u884c\u6570\n\u66f4\u65b0\uff083\uff09\u540e\u73b0\u6709\u8282\u4e2d\u5305\u542b\u7684\u884c\u5fc5\u987b\u662f\n\u7b49\u4e8e\u8be5\u8282\u4e2d\u5305\u542b\u7684\u884c\u6570\uff0c\u5728\n\u66f4\u65b0\uff082\uff09\uff0c\u52a0\u4e0a\u6216\u51cf\u53bb\u4ece\u4e2d\u63d2\u5165\u6216\u5220\u9664\u7684\u884c\u6570\n\u8be5\u90e8\u5206\uff08\u63d2\u51650\uff0c\u5220\u96640\uff09\u52a0\u4e0a\u6216\u51cf\u53bb\n\u79fb\u5165\u6216\u79fb\u51fa\u8be5\u8282\u7684\u884c\uff080\u79fb\u5165\uff0c0\u79fb\u51fa\uff09\u3002\n</code></pre>\n\n<!-- more -->\n<h3 id=\"_1\">\u51fa\u73b0\u60c5\u51b5</h3>\n<pre class=\"codehilite\"><code class=\"language-swift\">&lt;!--UITableView \u5904\u4e8e reload \u4e2d--&gt;\ntableView.beginUpdates()\ntableView.endUpdates()\n</code></pre>\n\n<h3 id=\"_2\">\u51fa\u73b0\u539f\u56e0</h3>\n<p>\u5f53 UITableView section \u4e2d\u7684\u6570\u91cf\u6709\u53d8\u5316\u65f6\u5e76\u4e14\u6b64\u65f6 UITableView \u6b63\u5904\u4e8e reload \u72b6\u6001\uff0c\u6b64\u65f6\u672a reload \u5b8c\u7684 UITableView \u7684section \u4e2d cell\u6570\u4e0ereload \u5b8c\u7684\u6570\u91cf\u4e0d\u4e00\u81f4\uff0c\u8fd9\u4e2a\u65f6\u5019\u5bf9\u4e8e UITableView \u4e2d cell \u7684\u64cd\u4f5c\uff08\u5982\uff1a\u589e\u3001\u5220\uff09\u5c31\u4f1a\u5bfc\u81f4\u8be5\u9519\u8bef\u3002</p>\n<h3 id=\"_3\">\u89e3\u51b3\u65b9\u6848</h3>\n<ol>\n<li>\u5728beginUpdates\u548cendUpdates\u63d2\u5165\u5bf9cell\u6570\u91cf\u6709\u6539\u53d8\u7684section\u7684\u5237\u65b0</li>\n</ol>\n<pre class=\"codehilite\"><code class=\"language-swift\">tableView.beginUpdates()\ntableView.reloadSections(IndexSet([0]), with: .automatic)\ntableView.endUpdates()\n</code></pre>\n\n<ol start=\"2\">\n<li>\u5728 UITableView reloadData \u5b8c\u540e\u64cd\u4f5c</li>\n</ol>\n<pre class=\"codehilite\"><code class=\"language-swift\">DispatchQueue.main.async {\n   tableView.beginUpdates()\n   tableView.endUpdates()\n}\n</code></pre>"}