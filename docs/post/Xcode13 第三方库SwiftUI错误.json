{"title": "Xcode13 Kingfisher\u3001RealmSwift Release\u6a21\u5f0f\u7f16\u8bd1\u62a5\u9519", "date": "2021-11-01 16:38:42", "categories": "iOS", "tags": "iOS \u95ee\u9898\u96c6", "keywords": "Xcode13,Kingfisher,RealmSwift,Swift UI", "description": "", "images": "", "file_name": "Xcode13 \u7b2c\u4e09\u65b9\u5e93SwiftUI\u9519\u8bef", "short": " Xcode 13 \u53d1\u884c\u8bf4\u660e\u4e2d\u63d0\u5230\uff1a \n \n Swift \u5e93\u53ef\u80fd\u65e0\u6cd5\u4e3a\u4f7f\u7528 armv7 \u7684 iOS \u76ee\u6807\u6784\u5efa\u3002(74120874) \n\u89e3\u51b3\u65b9\u6cd5\uff1a\u5c06\u5305\u7684\u5e73\u53f0\u4f9d\u8d56\u6027\u589e\u52a0\u5230 v12 \u6216\u66f4\u9ad8\u7248\u672c\u3002 \n\u4f9d\u8d56\u4e8e Combine \u7684 Swift \u5e93\u53ef\u80fd\u65e0\u6cd5\u4e3a\u5305\u62ec armv7 \u548c i386 \u67b6\u6784\u5728\u5185\u7684\u76ee\u6807\u6784\u5efa\u3002(82183186, 82189214) \n\u89e3\u51b3\u65b9\u6cd5\uff1a\u4f7f\u7528\u4e0d\u53d7\u5f71\u54cd\u7684\u5e93\u7684\u66f4\u65b0\u7248\u672c\uff08\u5982\u679c\u53ef\u7528\uff09\u6216\u5220\u9664 armv7 \u548c i386 \u652f\u6301\uff08 \n\u4f8b\u5982\uff0c\u5c06\u5e93\u7684\u90e8\u7f72\u76ee\u6807\u589e\u52a0\u5230 iOS 11 \u6216\u66f4\u9ad8\u7248\u672c\uff09\u3002 \n \n ", "content": "<p>Xcode 13 \u53d1\u884c\u8bf4\u660e\u4e2d\u63d0\u5230\uff1a</p>\n<blockquote>\n<p>Swift \u5e93\u53ef\u80fd\u65e0\u6cd5\u4e3a\u4f7f\u7528 armv7 \u7684 iOS \u76ee\u6807\u6784\u5efa\u3002(74120874)<br />\n\u89e3\u51b3\u65b9\u6cd5\uff1a\u5c06\u5305\u7684\u5e73\u53f0\u4f9d\u8d56\u6027\u589e\u52a0\u5230 v12 \u6216\u66f4\u9ad8\u7248\u672c\u3002<br />\n\u4f9d\u8d56\u4e8e Combine \u7684 Swift \u5e93\u53ef\u80fd\u65e0\u6cd5\u4e3a\u5305\u62ec armv7 \u548c i386 \u67b6\u6784\u5728\u5185\u7684\u76ee\u6807\u6784\u5efa\u3002(82183186, 82189214)<br />\n\u89e3\u51b3\u65b9\u6cd5\uff1a\u4f7f\u7528\u4e0d\u53d7\u5f71\u54cd\u7684\u5e93\u7684\u66f4\u65b0\u7248\u672c\uff08\u5982\u679c\u53ef\u7528\uff09\u6216\u5220\u9664 armv7 \u548c i386 \u652f\u6301\uff08<br />\n\u4f8b\u5982\uff0c\u5c06\u5e93\u7684\u90e8\u7f72\u76ee\u6807\u589e\u52a0\u5230 iOS 11 \u6216\u66f4\u9ad8\u7248\u672c\uff09\u3002</p>\n</blockquote>\n<!-- more -->\n<p>Kingfisher\u3001RealmSwift \u5e93\u5904\u4e8e\u4e0a\u8ff0\u60c5\u51b5\uff0c\u5982\u679c\u9879\u76ee\u4e2d\u4f7f\u7528\u7684\u662f Swift UI \u5219\u9700\u8981\u5c06\u6700\u4f4e\u517c\u5bb9\u7248\u672c\u6539\u4e3a iOS 12\u3002\u7531\u4e8e\u4e2a\u4eba\u9879\u76ee\u9700\u8981\u517c\u5bb9 iOS 10 \u5e76\u4e14\u9879\u76ee\u4e2d\u4e5f\u6ca1\u6709\u4f7f\u7528\u5230 Swift UI\uff0c\u6240\u4ee5\u4fee\u6539 pod file\uff0c\u5728 pod install \u65f6\u5c06Kingfisher\u3001RealmSwift\u5e93\u7684 Swift UI \u76f8\u5173\u4ee3\u7801\u5220\u9664\u3002</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"n\">pre_install</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">installer</span><span class=\"o\">|</span>\n  <span class=\"n\">remove_Kingfisher_swiftui</span><span class=\"p\">()</span>\n  <span class=\"n\">remove_RealmSwift_swiftui</span><span class=\"p\">()</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">remove_Kingfisher_swiftui</span>\n  <span class=\"n\">code_file</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;./Pods/Kingfisher/Sources/General/KFOptionsSetter.swift&quot;</span>\n  <span class=\"n\">code_text</span> <span class=\"o\">=</span> <span class=\"no\">File</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">(</span><span class=\"n\">code_file</span><span class=\"p\">)</span>\n  <span class=\"n\">code_text</span><span class=\"o\">.</span><span class=\"n\">gsub!</span><span class=\"p\">(</span><span class=\"sr\">/#if canImport\\(SwiftUI\\) \\&amp;\\&amp; canImport\\(Combine\\)(.|\\n)+#endif/</span><span class=\"p\">,</span><span class=\"s1\">&#39;&#39;</span><span class=\"p\">)</span>\n  <span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"no\">File</span><span class=\"o\">.</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"n\">code_file</span><span class=\"p\">,</span> <span class=\"s1\">&#39;w+&#39;</span><span class=\"p\">)</span>\n  <span class=\"n\">file</span><span class=\"o\">.</span><span class=\"n\">syswrite</span><span class=\"p\">(</span><span class=\"n\">code_text</span><span class=\"p\">)</span>\n  <span class=\"n\">file</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">()</span>\n<span class=\"k\">end</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">remove_RealmSwift_swiftui</span>\n  <span class=\"n\">code_file</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;./Pods/RealmSwift/RealmSwift/SwiftUI.swift&quot;</span>\n  <span class=\"n\">code_text</span> <span class=\"o\">=</span> <span class=\"no\">File</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">(</span><span class=\"n\">code_file</span><span class=\"p\">)</span>\n  <span class=\"n\">code_text</span><span class=\"o\">.</span><span class=\"n\">gsub!</span><span class=\"p\">(</span><span class=\"sr\">/#if canImport\\(SwiftUI\\) \\&amp;\\&amp; canImport\\(Combine\\)(.|\\n)+#else/</span><span class=\"p\">,</span><span class=\"s1\">&#39;&#39;</span><span class=\"p\">)</span>\n  <span class=\"n\">code_text</span> <span class=\"o\">=</span> <span class=\"n\">code_text</span><span class=\"o\">.</span><span class=\"n\">gsub</span><span class=\"p\">(</span><span class=\"sr\">/#endif/</span><span class=\"p\">,</span><span class=\"s1\">&#39;&#39;</span><span class=\"p\">)</span>\n  <span class=\"n\">file</span> <span class=\"o\">=</span> <span class=\"no\">File</span><span class=\"o\">.</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"n\">code_file</span><span class=\"p\">,</span> <span class=\"s1\">&#39;w+&#39;</span><span class=\"p\">)</span>\n  <span class=\"n\">file</span><span class=\"o\">.</span><span class=\"n\">syswrite</span><span class=\"p\">(</span><span class=\"n\">code_text</span><span class=\"p\">)</span>\n  <span class=\"n\">file</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">()</span>\n<span class=\"k\">end</span>\n</code></pre></div>\n\n<p>\u5728 Ruby \u4e2d gsub \u51fd\u6570\u7528\u4e8e\u66ff\u6362\u5b57\u7b26\uff0c\u793a\u4f8b\u7528\u6cd5\u5982\u4e0b\uff1a</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"s1\">&#39;abc&#39;</span><span class=\"o\">.</span><span class=\"n\">gsub</span><span class=\"p\">(</span><span class=\"sr\">/a/</span><span class=\"p\">,</span><span class=\"n\">d</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"s1\">&#39;dbc&#39;</span>\n<span class=\"s1\">&#39;abc&#39;</span><span class=\"o\">.</span><span class=\"n\">gsub!</span><span class=\"p\">(</span><span class=\"sr\">/a/</span><span class=\"p\">,</span><span class=\"n\">d</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"s1\">&#39;dbc&#39;</span>\n<span class=\"s1\">&#39;abc&#39;</span><span class=\"o\">.</span><span class=\"n\">gsub</span><span class=\"p\">(</span><span class=\"sr\">/d/</span><span class=\"p\">,</span><span class=\"n\">e</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"s1\">&#39;abc&#39;</span>\n<span class=\"s1\">&#39;abc&#39;</span><span class=\"o\">.</span><span class=\"n\">gsub!</span><span class=\"p\">(</span><span class=\"sr\">/d/</span><span class=\"p\">,</span><span class=\"n\">e</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"kp\">nil</span>\n</code></pre></div>\n\n<p>\u82e5\u6709\u5176\u4ed6\u7b2c\u4e09\u65b9\u5e93\u9047\u5230\u8fd9\u79cd\u60c5\u51b5\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u6839\u636e\u4e0a\u9762\u7684\u793a\u4f8b\u7f16\u5199\u5bf9\u5e94\u51fd\u6570\uff0c\u5220\u9664 Swift UI \u4ee3\u7801\u3002</p>"}