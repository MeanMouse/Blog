---
title: 音视频基础知识
date: 2023-11-23 18:54:47
categories:
- 音视频
tags:
- 音视频
keywords:
- 音视频
description:
images:
---

## 音视频
音视频（Audio-Visual）是指结合声音和图像的媒体形式。它可以包括电影、电视节目、音乐视频、广告等各种形式的媒体内容，通过同时传递声音和图像来提供更丰富的观感和沟通方式。音视频技术涉及录制、编辑、传输和播放等方面，包括音频编解码、视频编解码、流媒体传输、多媒体容器格式等。在现代社会中，音视频已经成为人们日常生活中不可或缺的一部分，广泛应用于娱乐、教育、通信、广告等领域。
<!-- more -->
## PCM
PCM (Pulse Code Modulation)是一种用于数字音频和视频的编码格式。它将模拟信号转换为数字信号，通过对模拟信号进行采样和量化来表示音频或视频数据。

在音频领域，PCM通常指的是线性脉冲编码调制（Linear Pulse Code Modulation），它将连续的模拟音频信号转换为离散的数字样本。每个样本的幅度值被量化为固定数量的位数，例如16位，以表示不同的音频级别。这些样本按照固定的采样率（例如44.1 kHz）进行连续采样，以便在播放或存储时能够还原出原始音频信号。

在视频领域，PCM可以用于音频部分的编码。对于视频本身，常见的编码格式是基于帧的压缩算法，如H.264或HEVC。这些视频编码格式使用PCM来编码视频中的音频轨道，以便与视频数据一起进行传输或存储。

总结而言，PCM是一种将模拟音频或视频信号转换为数字信号的编码格式，用于表示和处理音频或视频数据。

## 视频格式
视频格式是指用于存储和传输视频数据的特定文件格式或编码方式。常见的视频格式有：

- MPEG-4（.mp4）：一种广泛使用的视频格式，具有较高的压缩比和良好的视频质量，适用于各种设备和平台。

- AVI（Audio Video Interleave）：一种由微软开发的视频容器格式，支持多种编解码器，但文件大小通常较大。

- MOV（QuickTime Movie）：苹果公司开发的视频格式，常用于Mac系统和苹果设备，支持多种编解码器。

- WMV（Windows Media Video）：微软开发的视频格式，主要用于Windows平台，具有较高的压缩性能和较小的文件大小。

- FLV（Flash Video）：一种用于网络流媒体的视频格式，常用于在线视频播放器和视频共享网站。

- MKV（Matroska Video）：一种开放标准的多媒体容器格式，支持多种音频、视频和字幕轨道，适用于高清视频。

## 音频格式
音频格式是用于存储和传输音频数据的文件格式或编码方式。常见的音频格式有：

- MP3（MPEG Audio Layer-3）：一种有损压缩格式，广泛用于音乐和音频文件的压缩和传输。

- WAV（Waveform Audio File Format）：一种无损音频格式，通常用于存储未经压缩的音频数据，保留了高质量的音频信息。

- AAC（Advanced Audio Coding）：一种有损压缩格式，被广泛用于音乐、视频和流媒体服务中，提供了更好的音质和较小的文件大小。

- FLAC（Free Lossless Audio Codec）：一种无损压缩格式，能够压缩音频文件而不损失任何音质，适用于需要保留高质量音频的场景。

- OGG（Ogg Vorbis）：一种开放的、免费的音频格式，具有较高的音质和压缩比，常用于音乐和游戏等领域。

- AIFF（Audio Interchange File Format）：一种无损音频格式，常用于苹果电脑系统上的音频存储和处理。

## 音视频编码
编码是将音频和视频信号转换为数字数据的过程，以便在数字媒体中存储、传输和播放。它涉及将原始音频和视频信号压缩成更小的文件大小，同时尽量保持高质量的目标。

### 音频编码格式
音频编码格式是将声音信号转换为数字数据的一种方式。常见的音频编码格式有：

- AAC（Advanced Audio Coding）：一种有损压缩格式，通常用于音乐、视频和流媒体服务中，提供更好的音质和较低的比特率。

- MP3（MPEG Audio Layer-3）：一种有损压缩格式，广泛用于音乐和音频文件的存储和传输。

- WAV（Waveform Audio File Format）：一种无损音频格式，常用于存储高质量的音频文件，但文件大小较大。

- FLAC（Free Lossless Audio Codec）：一种无损音频格式，能够压缩音频文件而不损失任何音质，适用于需要保留高质量音频的场景。

- OGG（Ogg Vorbis）：一种开放的、免费的音频编码格式，常用于音乐和游戏等领域。

- WMA（Windows Media Audio）：一种由微软开发的音频编码格式，常用于Windows平台上的音频文件和流媒体。

### 视频编码格式

视频编码格式是用于将视频信号压缩和存储的一种标准化格式。常见的视频编码格式有：

- H.264/AVC：目前最广泛使用的视频编码格式之一，具有高压缩比和良好的视频质量。

- H.265/HEVC：H.264的后继者，提供更高的压缩效率，可以在相同的比特率下获得更好的视频质量。

- VP9：由Google开发的开放源代码视频编码格式，旨在提供与H.264相当的视频质量，但以更低的比特率进行传输。

- AV1：由Alliance for Open Media（AOMedia）开发的开放源代码视频编码格式，旨在提供更高的压缩效率和更好的视频质量。

- MPEG-2：广泛用于DVD、数字电视和广播等应用领域的视频编码格式。

- MPEG-4：支持较高的压缩比和多媒体功能，包括流媒体、视频会议和移动视频等。

## 音频相关知识
### 音频采样频率
音频采样频率是指在数字音频中每秒钟对声音信号进行采样的次数, 常见的采样频率有:
- 22000（22kHz） 无线广播
- 44100（44.1kHz） CD音质
- 48000（48kHz） 数字电视，DVD
- 96000（96kHz） 蓝光，高清DVD
- 192000（192kHz） 蓝光，高清DVD

### 音频采样精度
音频采样精度是指在数字音频中用于表示每个采样点的位数。它决定了音频的动态范围和信噪比。常见的音频采样精度有8位、16位、24位和32位。较高的采样精度可以提供更准确的音频表示，但也会增加文件大小和处理要求。一般来说，16位采样精度已经能够满足大多数音频需求，而更高的精度主要用于专业音频制作和高保真音频领域。

### 音频比特率
每秒传输的bit数，单位为：bps（Bit Per Second），间接衡量声音质量的一个标准。没有压缩的音频数据的比特率 = 采样频率 * 采样精度 * 通道数。

例如：
采样频率44100，采样精度16bit，2通道（声道），采集4分钟的数据
44100162460= 338688000bit
文件大小：338688000/8/1024/1024 = 40M字节
比特率 = 采样频率 * 采样精度 * 通道数 = 44100162= 1411200 bit/s = 137.8kb/s
从上面的关系可以看出比特率=音频文件大小/时长。

### 音频码率
音频码率是指在数字音频中每秒钟传输的比特数。它表示音频文件的数据压缩程度和质量。常见的音频码率单位是kbps（千比特每秒），例如128 kbps、256 kbps等。较高的码率通常意味着更高的音质和文件大小，而较低的码率则会导致较低的音质但文件大小更小。

- 96kbps         FM质量
- 128-160kbps    一般质量音频
- 192kbps        CD质量
- 256-320Kbps    高质量音频

### 音频帧
每次编码的采样单元数，比如MP3通常是1152个采样点作为一个编码单元，AAC通常是1024个采样点作为一个编码单元。

通常，一个媒体流是由大量的数据帧组成的，对于压缩数据，帧对应着编解码器的最小处理单元。

采样点是在特定时间间隔内对声音信号进行测量或记录的数据点。你可以将其想象为在时间轴上等距离分布的点，每个点记录了声音信号在特定时间点上的振幅值。采样点的数量决定了数字音频的精细程度，也就是说，通过增加采样点的数量，我们可以获得更多的声音细节。

采样率是指每秒钟进行采样的次数，通常以赫兹（Hz）为单位。也就是在一秒钟内采集的采样点数。采样率决定了数字音频的频率范围和还原质量。更高的采样率意味着更多的采样点被记录下来，可以表示更高频率的声音信号，因此可以提供更准确和真实的音频还原。

知道他们的关系就可以知道在一定时间内的音频帧数。

### 音频帧长
音频帧长指的是: 每帧播放持续的时间, 每帧持续时间(秒) = 每帧采样点数 / 采样频率（HZ）比如：
MP3 48k, 1152个采样点，每帧则为 24毫秒: 1152/48000= 0.024 秒 = 24毫秒；

### 交错模式
数字音频信号存储的方式。数据以连续帧的方式存放，即首先记录帧1的左声道样本和右声道样本，再开始帧2的记录...
```
L R L R L R L R L R
```

### 非交错模式
首先记录的是一个周期内所有帧的左声道样本，再记录所有右声道样本
```
L L L ... R R R
```
比如AAC 一帧是1024，那么在交错模式下记录一帧记录的就是【LRLRLR...】，而在非交错模式下一帧记录的就是1024【LLLL...】+ （1024）【RRRR....】

## 视频相关知识
### 图像表示
#### RGB格式
红光（R）绿光（G）蓝光（B）每个像素用 8bit 表示 色彩：256 * 256 * 256 = 1677, 7216 对于一幅图像，一般使用整数表示方法来进行描述，比如计算一张1280×720的RGB_888图像的大小，可采用如下方式：1280 * 720 * 3 = 2.637 MB。这也是位图（bitmap）在内存中所占的大小 如果一部90分钟的电影，每秒25帧，则一部电影为2.637MB90分钟60秒*25FPS= 347.651GB.

#### YUV格式
YUV是一种颜色编码系统，常用于数字视频和图像处理。它将亮度（Y）和色度（U、V）分离，以提高压缩效率和图像质量。Y表示亮度信息，而U和V表示色度信息。在YUV格式中，亮度信号被采样并存储为灰度图像，而色度信号则以较低的分辨率进行采样，并与亮度信号进行组合。这种分离和抽样的方式使得YUV格式适用于视频压缩和传输，因为人眼对亮度变化更敏感，而对色度变化不太敏感。常见的YUV格式包括YUV420、YUV422和YUV444，它们在亮度和色度的采样比例上有所不同。

### 视频码率
视频码率是指视频文件中每秒传输的数据量，通常以比特率（bitrate）表示，单位为bps（bits per second）。视频码率越高，图像质量越好，但文件大小也会相应增大。常见的视频码率有几百kbps到几十Mbps不等，具体的码率取决于视频的分辨率、帧率、编码方式以及所需的图像质量等因素。

### 视频帧率
视频帧率是指每秒钟显示的图像帧数。它通常以单位“帧/秒”（fps）来表示。常见的视频帧率包括24fps、30fps和60fps。较低的帧率可能会导致视频画面不够流畅，而较高的帧率则可以提供更加细腻的动画效果

### 视频分辨率
视频分辨率是指视频图像的清晰度和细节水平。它通常以水平像素数乘以垂直像素数来表示，例如1920x1080表示宽度为1920像素，高度为1080像素的分辨率。常见的视频分辨率包括：
- 480p：854x480像素
- 720p：1280x720像素
- 1080p：1920x1080像素
- 4K（Ultra HD）：3840x2160像素
- 8K：7680x4320像素

### I帧
I帧是视频编码中的一种帧类型，表示独立帧（Intra Frame）。I帧是视频序列中的关键帧，它不依赖于其他帧进行解码。在视频压缩中，I帧通常用于标记视频序列的起点或关键场景，以提供完整的图像信息。其他帧类型如P帧（预测帧）和B帧（双向预测帧）则通过对I帧进行差异编码来实现更高的压缩率。

### P帧
在视频压缩中，连续的视频帧通常具有很高的冗余性，即相邻帧之间的像素数据非常相似。为了减小视频文件的大小，视频编码器会利用这种冗余性进行压缩。

P帧是一种预测帧，它通过对前面已编码的参考帧进行运动估计和补偿来预测当前帧的像素值。具体而言，P帧只存储与参考帧之间的差异信息，而不存储完整的像素数据。这样可以大大减小视频文件的大小，因为只需要存储差异信息即可。

当解码视频时，解码器会使用参考帧和P帧的差异信息来重建当前帧的像素值。由于P帧只存储差异信息，所以解码器需要参考帧作为基础来进行预测和重建。

总结起来，P帧是视频编码中的一种帧类型，通过对参考帧进行运动估计和补偿来预测当前帧的像素值，并只存储差异信息，以实现视频压缩。

### B帧
B帧是通过对前后两个关键帧（I帧或P帧）进行预测来编码的。它可以利用时间和空间上的冗余性，提高视频压缩效率。与P帧相比，B帧可以更好地利用视频序列中的运动信息，因为它可以参考前后两个关键帧进行预测。

具体而言，B帧可以通过两种方式进行预测：前向预测和后向预测。前向预测是指使用前一个关键帧或P帧作为参考帧进行预测，而后向预测则是使用后一个关键帧或P帧作为参考帧进行预测。B帧可以选择使用前向预测、后向预测或两者结合来获得最佳的预测效果。

由于B帧可以参考前后两个关键帧进行预测，所以在解码时需要确保这两个关键帧已经解码完成。这也意味着B帧的解码顺序可能会与显示顺序不同，需要进行适当的重排序。

总之，B帧在视频编码中起到了重要的作用，可以提高视频压缩效率，并在保持视频质量的同时减小文件大小。

### 帧内压缩
帧内压缩是一种视频压缩技术，也称为无损压缩或基于帧的压缩, I帧采用的便是帧内压缩技术。它通过在单个视频帧内减少冗余信息来实现数据压缩，而不依赖于其他帧的信息。帧内压缩通常用于对静态或低运动场景进行压缩，以保留图像的细节和质量。这种压缩方法适用于某些特定应用，如医学成像、无损图像编辑等，但相对于其他压缩方法，它的压缩比较低。

### 帧间压缩
帧间压缩是一种视频压缩技术，用于减小视频文件的大小。它通过利用连续视频帧之间的冗余性来实现压缩。在帧间压缩中，只有关键帧（I帧）是完整编码的帧，其他帧（P帧和B帧）则根据与前一帧或前后帧之间的差异进行编码。

P帧（预测帧）通过对前一帧进行运动估计和补偿来编码，而B帧（双向预测帧）则通过对前后两帧进行运动估计和补偿来编码。这样，只需存储少量的关键帧和运动信息，就可以还原整个视频序列。

帧间压缩能够显著减小视频文件的大小，同时保持较高的视觉质量。然而，解码时需要依赖前一帧或前后帧的信息，因此在视频编辑或随机访问时可能会有一定的延迟。